"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[252],{8627:function(e,l,s){s.r(l),s.d(l,{default:function(){return Ie}});var a=s(6768),t=s(4232),o=s(5130);const n={class:"page-wrapper"},d={class:"main-container"},r={class:"content-wrapper-scroll"},i={class:"content-wrapper"},u={class:"row"},c={class:"col-12"},m={class:"card"},b={class:"d-flex p-3"},k=(0,a.Lk)("button",{"data-bs-toggle":"modal","data-bs-target":"#addForm",class:"btn btn-primary btn-sm fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[(0,a.Lk)("span",{class:"fas fa-plus mx-1 fs-5"}),(0,a.eW)(" Adicionar ")],-1),L=(0,a.Lk)("span",{class:"fas fa-pencil mx-1 fs-5"},null,-1),p=(0,a.Lk)("span",{class:"fas fa-trash mx-1 fs-5"},null,-1),v={class:"card-body"},f=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"NOME"),(0,a.Lk)("th",null,"TELEFONE"),(0,a.Lk)("th",null,"NÍVEL"),(0,a.Lk)("th",null,"ESTADO"),(0,a.Lk)("th",null,"ÚLTIMO LOGIN")])],-1),h={class:"modal fade",id:"addForm","data-bs-backdrop":"static"},g={class:"modal-dialog rounded-0"},F={class:"modal-content rounded-0"},w={class:"modal-header"},y={class:"modal-body"},x={class:"row"},E={class:"col-md-12 mb-3"},U=(0,a.Lk)("label",null,"Nome",-1),A=(0,a.Lk)("br",null,null,-1),C={class:"col-md-12 mb-3"},N=(0,a.Lk)("label",null,"Telefone",-1),V=(0,a.Lk)("br",null,null,-1),$={class:"col-md-12 mb-3"},z=(0,a.Lk)("label",null,"Email",-1),H=(0,a.Lk)("br",null,null,-1),T={class:"col-md-12 mb-3"},D=(0,a.Lk)("label",null,"Nível",-1),J=(0,a.Lk)("br",null,null,-1),_=["value"],O={class:"col-md-12 mb-3"},P=(0,a.Lk)("label",null,"Palavra-Passe",-1),S=(0,a.Lk)("br",null,null,-1),R={class:"col-md-12 mb-3"},I=(0,a.Lk)("label",null,"Estado",-1),W=(0,a.Lk)("br",null,null,-1),X={class:"modal-footer border-0 pt-0"},M=(0,a.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1),Y={class:"modal fade",id:"editForm","data-bs-backdrop":"static"},G={class:"modal-dialog rounded-0"},K={class:"modal-content rounded-0"},j={class:"modal-header"},B={class:"modal-body"},q={class:"row"},Q={class:"col-md-12 mb-3"},Z=(0,a.Lk)("label",null,"Nome",-1),ee=(0,a.Lk)("br",null,null,-1),le={class:"col-md-12 mb-3"},se=(0,a.Lk)("label",null,"Telefone",-1),ae=(0,a.Lk)("br",null,null,-1),te={class:"col-md-12 mb-3"},oe=(0,a.Lk)("label",null,"Email",-1),ne=(0,a.Lk)("br",null,null,-1),de={class:"col-md-12 mb-3"},re=(0,a.Lk)("label",null,"Nível",-1),ie=(0,a.Lk)("br",null,null,-1),ue=["value"],ce={class:"col-md-12 mb-3"},me=(0,a.Lk)("label",null,"Palavra-Passe",-1),be=(0,a.Lk)("br",null,null,-1),ke={class:"col-md-12 mb-3"},Le=(0,a.Lk)("label",null,"Estado",-1),pe=(0,a.Lk)("br",null,null,-1),ve={class:"modal-footer border-0 pt-0"},fe=(0,a.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1),he={class:"modal fade",id:"removeForm","data-bs-backdrop":"static"},ge={class:"modal-dialog rounded-0"},Fe={class:"modal-content rounded-0"},we={class:"modal-header"},ye={class:"modal-body"},xe={class:"row"},Ee={class:"modal-footer border-0 pt-0"},Ue=(0,a.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1);function Ae(e,l,s,Ae,Ce,Ne){const Ve=(0,a.g2)("Sidebar"),$e=(0,a.g2)("Navbar"),ze=(0,a.g2)("DataTable"),He=(0,a.g2)("Footer");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.bF)(Ve),(0,a.Lk)("div",d,[(0,a.bF)($e,{page:"Autenticação / Utilizadores"}),(0,a.Lk)("div",r,[(0,a.Lk)("div",i,[(0,a.Lk)("div",u,[(0,a.Lk)("div",c,[(0,a.Lk)("div",m,[(0,a.Lk)("div",b,[k,(0,a.Lk)("button",{onClick:l[0]||(l[0]=(...e)=>Ne.selectRow&&Ne.selectRow(...e)),"data-bs-toggle":"modal","data-bs-target":"#editForm",class:"btn btn-info btn-dark btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[L,(0,a.eW)(" Editar ")]),(0,a.Lk)("button",{onClick:l[1]||(l[1]=(...e)=>Ne.selectRow&&Ne.selectRow(...e)),"data-bs-toggle":"modal","data-bs-target":"#removeForm",class:"btn btn-danger btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[p,(0,a.eW)(" Excluir ")])]),(0,a.Lk)("div",v,[(0,a.bF)(ze,{data:Ce.utilizadores,columns:Ce.columns,options:{select:!0,language:Ce.language},ref:"table",class:"display table table-bordered table-striped"},{default:(0,a.k6)((()=>[f])),_:1},8,["data","columns","options"])])])])]),(0,a.Lk)("div",h,[(0,a.Lk)("div",g,[(0,a.Lk)("div",F,[(0,a.Lk)("div",w,[(0,a.Lk)("h4",null,(0,t.v_)(Ce.title),1)]),(0,a.Lk)("div",y,[(0,a.Lk)("div",x,[(0,a.Lk)("div",E,[U,A,(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":l[2]||(l[2]=e=>Ce.user.nome=e)},null,512),[[o.Jo,Ce.user.nome]])]),(0,a.Lk)("div",C,[N,V,(0,a.bo)((0,a.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":l[3]||(l[3]=e=>Ce.user.telefone=e)},null,512),[[o.Jo,Ce.user.telefone]])]),(0,a.Lk)("div",$,[z,H,(0,a.bo)((0,a.Lk)("input",{type:"email",class:"form-control","onUpdate:modelValue":l[4]||(l[4]=e=>Ce.user.email=e)},null,512),[[o.Jo,Ce.user.email]])]),(0,a.Lk)("div",T,[D,J,(0,a.bo)((0,a.Lk)("select",{class:"form-select","onUpdate:modelValue":l[5]||(l[5]=e=>Ce.user.nivel=e)},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Ce.niveis,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,t.v_)(e),9,_)))),128))],512),[[o.u1,Ce.user.nivel]])]),(0,a.Lk)("div",O,[P,S,(0,a.bo)((0,a.Lk)("input",{type:"password",class:"form-control","onUpdate:modelValue":l[6]||(l[6]=e=>Ce.user.senha=e)},null,512),[[o.Jo,Ce.user.senha]])]),(0,a.Lk)("div",R,[I,W,(0,a.bo)((0,a.Lk)("input",{type:"checkbox",class:"form-check","onUpdate:modelValue":l[7]||(l[7]=e=>Ce.user.status=e)},null,512),[[o.lH,Ce.user.status]])])])]),(0,a.Lk)("div",X,[M,(0,a.Lk)("button",{onClick:l[8]||(l[8]=(...e)=>Ne.submitForm&&Ne.submitForm(...e)),class:"btn btn-primary rounded-0"},"Enviar")])])])]),(0,a.Lk)("div",Y,[(0,a.Lk)("div",G,[(0,a.Lk)("div",K,[(0,a.Lk)("div",j,[(0,a.Lk)("h4",null,(0,t.v_)(Ce.title),1)]),(0,a.Lk)("div",B,[(0,a.Lk)("div",q,[(0,a.Lk)("div",Q,[Z,ee,(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":l[9]||(l[9]=e=>Ce.user.nome=e)},null,512),[[o.Jo,Ce.user.nome]])]),(0,a.Lk)("div",le,[se,ae,(0,a.bo)((0,a.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":l[10]||(l[10]=e=>Ce.user.telefone=e)},null,512),[[o.Jo,Ce.user.telefone]])]),(0,a.Lk)("div",te,[oe,ne,(0,a.bo)((0,a.Lk)("input",{type:"email",class:"form-control","onUpdate:modelValue":l[11]||(l[11]=e=>Ce.user.email=e)},null,512),[[o.Jo,Ce.user.email]])]),(0,a.Lk)("div",de,[re,ie,(0,a.bo)((0,a.Lk)("select",{class:"form-select","onUpdate:modelValue":l[12]||(l[12]=e=>Ce.user.nivel=e)},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Ce.niveis,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,t.v_)(e),9,ue)))),128))],512),[[o.u1,Ce.user.nivel]])]),(0,a.Lk)("div",ce,[me,be,(0,a.bo)((0,a.Lk)("input",{type:"password",class:"form-control","onUpdate:modelValue":l[13]||(l[13]=e=>Ce.user.senha=e)},null,512),[[o.Jo,Ce.user.senha]])]),(0,a.Lk)("div",ke,[Le,pe,(0,a.bo)((0,a.Lk)("input",{type:"checkbox",class:"form-check","onUpdate:modelValue":l[14]||(l[14]=e=>Ce.user.status=e)},null,512),[[o.lH,Ce.user.status]])])])]),(0,a.Lk)("div",ve,[fe,(0,a.Lk)("button",{onClick:l[15]||(l[15]=(...e)=>Ne.submitForm&&Ne.submitForm(...e)),class:"btn btn-primary rounded-0"},"Enviar")])])])]),(0,a.Lk)("div",he,[(0,a.Lk)("div",ge,[(0,a.Lk)("div",Fe,[(0,a.Lk)("div",we,[(0,a.Lk)("h4",null,(0,t.v_)(Ce.title),1)]),(0,a.Lk)("div",ye,[(0,a.Lk)("div",xe,[(0,a.Lk)("p",null,[(0,a.eW)(" Deseja excluir "),(0,a.Lk)("b",null,(0,t.v_)(Ce.user.nome),1),(0,a.eW)(" definitivamente da base de dados? ")])])]),(0,a.Lk)("div",Ee,[Ue,(0,a.Lk)("button",{onClick:l[16]||(l[16]=(...e)=>Ne.deleteForm&&Ne.deleteForm(...e)),class:"btn btn-primary rounded-0"},"Confirmar")])])])])]),(0,a.bF)(He)])])])}var Ce=s(6587),Ne=s.n(Ce),Ve=s(7532),$e=s(3213),ze=s(3936),He=s(9715),Te=s(903),De=s(9995),Je=s(3786),_e=s(9148),Oe=s.n(_e);Te.A.use(De.A),Te.A.use(Je.A);var Pe={name:"user_view",components:{Sidebar:Ve.A,Navbar:$e.A,Footer:ze.A,DataTable:Te.A},data(){return{title:"Usuário",selectedRow:null,utilizadores:[],niveis:[],columns:[{data:"nome"},{data:"telefone"},{data:"nivel"},{data:null,render:e=>e.status?'<span class="fas fa-check-circle text-success"></span> Online':'<span class="fas fa-check-circle text-danger"></span> Offline'},{data:null,render:e=>`${Oe()(e.createdAt).format("DD-MM-YYYY HH:mm:ss")}`}],user:{id:null,nome:"",telefone:"",email:"",nivel:"",senha:"",status:!0},language:He.BH}},mounted(){this.getUsers(),this.getLevels()},methods:{getLevels(){this.niveis=["IT","Administrador","Secretaria","Tesouraria","Professor","D.Pedagógico","D.Geral","PCA"]},getUsers(){He.FH.get("/utilizadores/").then((e=>{this.utilizadores=e.data})).catch((e=>{console.log(e)}))},submitForm(){this.user.id>0?He.FH.put(`/utilizadores/${this.user.id}`,this.user).then((e=>{e.data.message?(this.$swal.fire({title:"Sucesso",text:e.data.message,icon:"success"}),this.getUsers(),Ne()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível atualizar",icon:"error"})})).catch((e=>{console.log(e)})):He.FH.post("/utilizadores/",this.user).then((e=>{e.data.data.id>0?(this.$swal.fire({title:"Sucesso",text:e.data.message,icon:"success"}),this.getUsers(),Ne()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível cadastrar",icon:"error"})})).catch((e=>{console.log(e)}))},deleteForm(){He.FH.delete(`/utilizadores/${this.user.id}`).then((e=>{e.data.message?(this.$swal.fire({title:"Sucesso",text:e.data.message,icon:"success"}),this.getUsers(),Ne()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível excluir",icon:"error"})})).catch((e=>{console.log(e)}))},selectRow(){const e=this.$refs.table.dt,l=this;e.rows({selected:!0}).every((function(){const e=this.data();l.user={id:e.id,nome:e.nome,telefone:e.telefone,email:e.email,nivel:e.nivel,senha:e.senha,status:e.status},console.log(l.user.nome)}))},clearForm(){this.user={id:null,nome:"",telefone:"",email:"",nivel:"",senha:"",status:!0}}}},Se=s(1241);const Re=(0,Se.A)(Pe,[["render",Ae]]);var Ie=Re}}]);
//# sourceMappingURL=252.b2cde3ff.js.map