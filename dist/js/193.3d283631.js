"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[193],{2932:function(e,a,t){t.r(a),t.d(a,{default:function(){return Le}});var l=t(6768),s=t(4232),o=t(5130);const d={class:"page-wrapper"},n={class:"main-container"},i={class:"content-wrapper-scroll"},r={class:"content-wrapper"},c={class:"row"},u={class:"col-12"},m={class:"card"},h={class:"card-body"},g={class:"row mb-2"},k={class:"col-md-3"},v=(0,l.Lk)("label",null,"Selecione o Ano",-1),b=(0,l.Lk)("br",null,null,-1),p=["value"],f={class:"col-md-3"},L=(0,l.Lk)("label",null,"Selecione o Curso",-1),_=(0,l.Lk)("br",null,null,-1),E=["value"],C={class:"col-md-3"},F=(0,l.Lk)("label",null,"Selecione o Periodo",-1),w=(0,l.Lk)("br",null,null,-1),A=["value"],S={class:"col-md-3"},$=(0,l.Lk)("label",null,"Selecione a Classe",-1),y=(0,l.Lk)("br",null,null,-1),N=["value"],T={class:"col-md-3"},x=(0,l.Lk)("label",null,"Selecione a Turma",-1),O=(0,l.Lk)("br",null,null,-1),D=["value"],z={class:"col-md-3"},I=(0,l.Lk)("label",null,"Tipo de Emolumento",-1),X=(0,l.Lk)("br",null,null,-1),H=["value"],R={class:"col-md-3"},P=(0,l.Lk)("label",null,"Emolumento",-1),K=(0,l.Lk)("br",null,null,-1),U=["value"],V={class:"col-md-5 d-flex"},M=(0,l.Lk)("label",{class:"text-white"},".",-1),G=(0,l.Lk)("br",null,null,-1),W=(0,l.Lk)("span",{style:{"font-size":"22px"},class:"fas fa-search mx-1"},null,-1),j={key:0},q=(0,l.Lk)("label",{class:"text-white"},".",-1),B=(0,l.Lk)("br",null,null,-1),J=(0,l.Lk)("span",{style:{"font-size":"22px"},class:"fas fa-file-pdf mx-1"},null,-1),Q=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",{class:"bg-secondary"},[(0,l.Lk)("th",null,"NOME"),(0,l.Lk)("th",null,"IDENTIFICAÇÃO"),(0,l.Lk)("th",null,"TELEFONE"),(0,l.Lk)("th",null,"ENCARREGADO"),(0,l.Lk)("th",null,"CONTACTO")])],-1),Y={class:"modal fade",id:"removeForm"},Z={class:"modal-dialog rounded-0"},ee={class:"modal-content rounded-0"},ae={class:"modal-header"},te={class:"modal-body"},le={class:"row"},se={class:"modal-footer border-0 pt-0"},oe=(0,l.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1);function de(e,a,t,de,ne,ie){const re=(0,l.g2)("Sidebar"),ce=(0,l.g2)("Navbar"),ue=(0,l.g2)("DataTable"),me=(0,l.g2)("Footer");return(0,l.uX)(),(0,l.CE)("div",d,[(0,l.bF)(re),(0,l.Lk)("div",n,[(0,l.bF)(ce,{page:"Secretaria / Lista de devedores"}),(0,l.Lk)("div",i,[(0,l.Lk)("div",r,[(0,l.Lk)("div",c,[(0,l.Lk)("div",u,[(0,l.Lk)("div",m,[(0,l.Lk)("div",h,[(0,l.Lk)("div",g,[(0,l.Lk)("div",k,[v,b,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[0]||(a[0]=e=>ne.filter_data.ano_id=e)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ne.anos,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.nome),9,p)))),128))],512),[[o.u1,ne.filter_data.ano_id]])]),(0,l.Lk)("div",f,[L,_,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[1]||(a[1]=e=>ne.filter_data.curso_id=e),onChange:a[2]||(a[2]=(...e)=>ie.getSalas&&ie.getSalas(...e))},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ne.cursos,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.nome),9,E)))),128))],544),[[o.u1,ne.filter_data.curso_id]])]),(0,l.Lk)("div",C,[F,w,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[3]||(a[3]=e=>ne.filter_data.periodo_id=e),onChange:a[4]||(a[4]=(...e)=>ie.getSalas&&ie.getSalas(...e))},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ne.periodos,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.nome),9,A)))),128))],544),[[o.u1,ne.filter_data.periodo_id]])]),(0,l.Lk)("div",S,[$,y,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[5]||(a[5]=e=>ne.filter_data.classe_id=e),onChange:a[6]||(a[6]=(...e)=>ie.getSalas&&ie.getSalas(...e))},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ne.classes,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.nome),9,N)))),128))],544),[[o.u1,ne.filter_data.classe_id]])]),(0,l.Lk)("div",T,[x,O,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[7]||(a[7]=e=>ne.filter_data.sala_id=e)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ne.salas,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.nome),9,D)))),128))],512),[[o.u1,ne.filter_data.sala_id]])]),(0,l.Lk)("div",z,[I,X,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[8]||(a[8]=e=>ne.filter_data.natureza_id=e),onChange:a[9]||(a[9]=(...e)=>ie.getEmolumentos&&ie.getEmolumentos(...e))},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ne.naturezas,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.nome),9,H)))),128))],544),[[o.u1,ne.filter_data.natureza_id]])]),(0,l.Lk)("div",R,[P,K,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[10]||(a[10]=e=>ne.filter_data.emolumento_id=e)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ne.emolumentos,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.nome),9,U)))),128))],512),[[o.u1,ne.filter_data.emolumento_id]])]),(0,l.Lk)("div",V,[(0,l.Lk)("div",null,[M,G,(0,l.Lk)("button",{onClick:a[11]||(a[11]=(...e)=>ie.getDevedores&&ie.getDevedores(...e)),class:"btn btn-primary btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[W,(0,l.eW)(" Pesquisar ")])]),ne.devedores.length>0?((0,l.uX)(),(0,l.CE)("div",j,[q,B,(0,l.Lk)("button",{onClick:a[12]||(a[12]=(...e)=>ie.generatePDF&&ie.generatePDF(...e)),class:"btn btn-danger btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[J,(0,l.eW)(" imprimir ")])])):(0,l.Q3)("",!0)])]),(0,l.bF)(ue,{ref:"table",data:ne.devedores,columns:ne.columns,options:{select:!0,language:ne.language},class:"display table table-striped table-bordered"},{default:(0,l.k6)((()=>[Q])),_:1},8,["data","columns","options"])])])])]),(0,l.Lk)("div",Y,[(0,l.Lk)("div",Z,[(0,l.Lk)("div",ee,[(0,l.Lk)("div",ae,[(0,l.Lk)("h4",null,(0,s.v_)(ne.title),1)]),(0,l.Lk)("div",te,[(0,l.Lk)("div",le,[(0,l.Lk)("p",null,[(0,l.eW)(" Deseja excluir "),(0,l.Lk)("b",null,(0,s.v_)(ne.matricula.nome),1),(0,l.eW)(" definitivamente da base de dados? ")])])]),(0,l.Lk)("div",se,[oe,(0,l.Lk)("button",{onClick:a[13]||(a[13]=(...e)=>ie.deleteForm&&ie.deleteForm(...e)),class:"btn btn-primary rounded-0"},"Confirmar")])])])])]),(0,l.bF)(me)])])])}var ne=t(6587),ie=t.n(ne),re=t(7532),ce=t(3213),ue=t(3936),me=t(9715),he=t(903),ge=t(9995),ke=t(3786),ve=t(1749);t(5839);he.A.use(ge.A),he.A.use(ke.A);var be={name:"matricula_view",components:{Sidebar:re.A,Navbar:ce.A,Footer:ue.A,DataTable:he.A},data(){return{title:"Matrícula",dataTable:null,selectedRow:null,devedores:[],estudantes:[],anos:[],cursos:[],periodos:[],salas:[],classes:[],naturezas:[],emolumentos:[],matricula:{id:null,Estudante:{},estudante_id:""},filter_data:{ano_id:"",curso_id:"",sala_id:"",periodo_id:"",classe_id:"",natureza_id:"",emolumento_id:""},columns:[{data:null,render:e=>`${e.nome}`},{data:null,render:e=>`${e.identificacao}`},{data:null,render:e=>`${e.telefone}`},{data:null,render:e=>`${e.encarregado}`},{data:null,render:e=>`${e.contacto_encarregado}`}],language:me.BH}},mounted(){this.getEstudantes(),this.getAnos(),this.getCursos(),this.getPeriodos(),this.getClasses(),this.getNaturezas()},methods:{getNaturezas(){me.FH.get("/emolumento-natureza/").then((e=>{this.naturezas=e.data})).catch((e=>{console.log(e)}))},getEmolumentos(){const{natureza_id:e}=this.filter_data;me.FH.get(`/emolumentos/natureza/${e}`).then((e=>{this.emolumentos=e.data})).catch((e=>{console.log(e)}))},getDevedores(){const{ano_id:e,sala_id:a,emolumento_id:t}=this.filter_data;me.FH.get(`/fluxo-de-caixa/devedores/ano/${e}/turma/${a}/emolumento/${t}`).then((e=>{this.devedores=e.data})).catch((e=>{console.log(e)}))},getEstudantes(){me.FH.get("/estudantes/").then((e=>{this.estudantes=e.data})).catch((e=>{console.log(e)}))},getAnos(){me.FH.get("/anos/status/1/").then((e=>{this.anos=e.data})).catch((e=>{console.log(e)}))},getCursos(){me.FH.get("/cursos/").then((e=>{this.cursos=e.data})).catch((e=>{console.log(e)}))},getSalas(){const{periodo_id:e,curso_id:a,classe_id:t}=this.filter_data;me.FH.get(`/salas/curso/${a}/classe/${t}/periodo/${e}`).then((e=>{this.salas=e.data})).catch((e=>{console.log(e)}))},getClasses(){me.FH.get("/classes/").then((e=>{this.classes=e.data})).catch((e=>{console.log(e)}))},getPeriodos(){me.FH.get("/periodos/").then((e=>{this.periodos=e.data})).catch((e=>{console.log(e)}))},getStudent(){me.FH.get(`/inscricao/numero/${this.filter_data.numero}`).then((e=>{null!=e.data?(this.estudante=e.data,this.registration.estudante_id=e.data.id,this.showStudent=!0,this.showRegistration=!0):(this.$swal.fire({title:"Notificação",icon:"warning",text:"Nenhum Estudante Encontrado"}),this.showStudent=!1,this.showRegistration=!1)})).catch((e=>{console.log(e)}))},submitForm(){const e={...this.matricula,...this.filter_data,user_id:this.$store.state.user.id,estado:"Estudando"};this.matricula.id>0?me.FH.put(`/matricula/${this.matricula.id}`,e).then((e=>{e.data.message?(this.$swal.fire({title:e.data.message,icon:"success"}),this.gerarComprovativo(e.data.data.id,e.data.data.curso_id),this.getdevedores(),ie()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível atualizar",icon:"error"})})).catch((e=>{this.$swal.fire({title:"Erro",icon:"error",text:e.response.data.message})})):me.FH.post("/matricula/",e).then((e=>{e.data.data.id>0?(this.$swal.fire({title:e.data.message,icon:"success"}),this.gerarComprovativo(e.data.data.id,e.data.data.curso_id),this.getdevedores(),ie()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível cadastrar",icon:"error"})})).catch((e=>{this.$swal.fire({title:"Erro",icon:"error",text:e.response.data.message})}))},deleteForm(){me.FH.delete(`/matricula/${this.matricula.id}`).then((e=>{e.data.message?(this.$swal.fire({title:e.data.message,icon:"success"}),this.getdevedores(),ie()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível excluir",icon:"error"})})).catch((e=>{console.log(e)}))},selectRow(){const e=this.$refs.table.dt,a=this;e.rows({selected:!0}).every((function(){const e=this.data();a.matricula=e}))},clearForm(){this.matricula={}},generatePDF(){let e=1;const a=new ve["default"],t=[{header:"Nº",dataKey:"id"},{header:"NOME DO ESTUDANTE",dataKey:"estudante"},{header:"ENCARREGADO",dataKey:"encarregado"},{header:"CONTACTO",dataKey:"contacto_encarregado"}],l=this.devedores.map((a=>({id:e++,estudante:a.nome,encarregado:a.encarregado,contacto_encarregado:a.contacto_encarregado})));a.addImage(`${me.OZ}/api/mediafiles/castro.jpeg`,"JPEG",90,15,25,25),a.setFontSize(12),a.text("INSTITUTO POLITÉCNICO PRIVADO CASTRO",58,50),a.text('"A Luz do Saber"',85,56),a.setFontSize(14),a.text("RELAÇÃO NOMINAL DE ESTUDANTES COM PAGAMENTOS EM ATRASO",20,64);const s=70;let o=s;a.autoTable(t,l,{startY:o,theme:"grid",didDrawPage:function(e){o=e.cursor.y+10}}),a.output("dataurlnewwindow")}},watch:{dataTable:{handler(){this.selectedRow=null},deep:!0}}},pe=t(1241);const fe=(0,pe.A)(be,[["render",de]]);var Le=fe}}]);
//# sourceMappingURL=193.3d283631.js.map