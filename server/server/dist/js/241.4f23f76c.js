"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[241],{5:function(a,t,e){e.r(t),e.d(t,{default:function(){return qa}});var l=e(6768),o=e(4232),s=e(5130);const n={class:"page-wrapper"},c={class:"main-container"},r={class:"content-wrapper-scroll"},d={class:"content-wrapper"},i={class:"row"},u={class:"col-12"},m={class:"card"},b={class:"d-flex p-3"},k=(0,l.Lk)("span",{class:"fas fa-plus mx-1 fs-5"},null,-1),L=(0,l.Lk)("span",{class:"fas fa-pencil mx-1 fs-5"},null,-1),h=(0,l.Lk)("span",{class:"fas fa-trash mx-1 fs-5"},null,-1),p={class:"card-body"},f={class:"row"},v={class:"col-md-3"},_=(0,l.Lk)("label",{class:"mb-1"},"Selecione o ano",-1),g=(0,l.Lk)("br",null,null,-1),F=["value"],w={class:"col-md-3"},y=(0,l.Lk)("label",{class:"mb-1 text-white"},".",-1),x=(0,l.Lk)("br",null,null,-1),C=(0,l.Lk)("span",{class:"fas fa-search"},null,-1),E=(0,l.Lk)("thead",{class:"bg-dark"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"ID"),(0,l.Lk)("th",null,"NOME"),(0,l.Lk)("th",null,"IDENTIFICAÇÃO"),(0,l.Lk)("th",null,"DURAÇÃO"),(0,l.Lk)("th",null,"INÍCIO"),(0,l.Lk)("th",null,"TÉRMINO"),(0,l.Lk)("th",null,"ESTADO")])],-1),A={class:"modal fade",id:"addForm"},$={class:"modal-dialog rounded-0"},I={class:"modal-content rounded-0"},U={class:"modal-header"},V={class:"modal-body"},H={class:"row"},R={class:"col-md-12 mb-3"},T=(0,l.Lk)("label",null,"Mês",-1),D=(0,l.Lk)("br",null,null,-1),X=["value"],N={class:"col-md-12 mb-3"},O=(0,l.Lk)("label",null,"Funcionário",-1),S=(0,l.Lk)("br",null,null,-1),J=["value"],W={class:"col-md-12 mb-3"},K=(0,l.Lk)("label",null,"Duração",-1),M=(0,l.Lk)("br",null,null,-1),P={class:"col-md-12 mb-3"},j=(0,l.Lk)("label",null,"Início",-1),q=(0,l.Lk)("br",null,null,-1),z={class:"col-md-12 mb-3"},B=(0,l.Lk)("label",null,"Término",-1),G=(0,l.Lk)("br",null,null,-1),Q={class:"col-md-4 mb-3"},Y=(0,l.Lk)("label",null,"Estado",-1),Z=(0,l.Lk)("br",null,null,-1),aa={class:"modal-footer border-0 pt-0"},ta=(0,l.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1),ea={class:"modal fade",id:"editForm"},la={class:"modal-dialog rounded-0"},oa={class:"modal-content rounded-0"},sa={class:"modal-header"},na={class:"modal-body"},ca={class:"row"},ra={class:"col-md-12 mb-3"},da=(0,l.Lk)("label",null,"Funcionário",-1),ia=(0,l.Lk)("br",null,null,-1),ua=["value"],ma={class:"col-md-12 mb-3"},ba=(0,l.Lk)("label",null,"Duração",-1),ka=(0,l.Lk)("br",null,null,-1),La={class:"col-md-12 mb-3"},ha=(0,l.Lk)("label",null,"Início",-1),pa=(0,l.Lk)("br",null,null,-1),fa={class:"col-md-12 mb-3"},va=(0,l.Lk)("label",null,"Término",-1),_a=(0,l.Lk)("br",null,null,-1),ga={class:"col-md-4 mb-3"},Fa=(0,l.Lk)("label",null,"Estado",-1),wa=(0,l.Lk)("br",null,null,-1),ya={class:"modal-footer border-0 pt-0"},xa=(0,l.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1),Ca={class:"modal fade",id:"removeForm"},Ea={class:"modal-dialog rounded-0"},Aa={class:"modal-content rounded-0"},$a={class:"modal-header"},Ia={class:"modal-body"},Ua={class:"row"},Va={class:"modal-footer border-0 pt-0"},Ha=(0,l.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1);function Ra(a,t,e,Ra,Ta,Da){const Xa=(0,l.g2)("Sidebar"),Na=(0,l.g2)("Navbar"),Oa=(0,l.g2)("DataTable"),Sa=(0,l.g2)("Footer");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(Xa),(0,l.Lk)("div",c,[(0,l.bF)(Na,{page:"Recursos Humanos / Mapa de Férias"}),(0,l.Lk)("div",r,[(0,l.Lk)("div",d,[(0,l.Lk)("div",i,[(0,l.Lk)("div",u,[(0,l.Lk)("div",m,[(0,l.Lk)("div",b,[(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...a)=>Da.clearForm&&Da.clearForm(...a)),"data-bs-toggle":"modal","data-bs-target":"#addForm",class:"btn btn-primary btn-sm fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[k,(0,l.eW)(" Adicionar ")]),(0,l.Lk)("button",{onClick:t[1]||(t[1]=(...a)=>Da.selectRow&&Da.selectRow(...a)),"data-bs-toggle":"modal","data-bs-target":"#editForm",class:"btn btn-info btn-dark btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[L,(0,l.eW)(" Editar ")]),(0,l.Lk)("button",{onClick:t[2]||(t[2]=(...a)=>Da.selectRow&&Da.selectRow(...a)),"data-bs-toggle":"modal","data-bs-target":"#removeForm",class:"btn btn-danger btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[h,(0,l.eW)(" Excluir ")])]),(0,l.Lk)("div",p,[(0,l.Lk)("div",f,[(0,l.Lk)("div",v,[_,g,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":t[3]||(t[3]=a=>Ta.filter_data.ano_id=a)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Ta.anos,(a=>((0,l.uX)(),(0,l.CE)("option",{key:a.id,value:a.id},(0,o.v_)(a.nome),9,F)))),128))],512),[[s.u1,Ta.filter_data.ano_id]])]),(0,l.Lk)("div",w,[y,x,(0,l.Lk)("button",{onClick:t[4]||(t[4]=(...a)=>Da.getContracts&&Da.getContracts(...a)),class:"btn btn-info fw-bold text-uppercase"},[C,(0,l.eW)(" Pesquisar ")])])]),(0,l.bF)(Oa,{data:Ta.contratos,columns:Ta.columns,options:{select:!0,language:Ta.language},ref:"table",class:"display table table-bordered table-striped"},{default:(0,l.k6)((()=>[E])),_:1},8,["data","columns","options"])])])])]),(0,l.Lk)("div",A,[(0,l.Lk)("div",$,[(0,l.Lk)("div",I,[(0,l.Lk)("div",U,[(0,l.Lk)("h4",null,(0,o.v_)(Ta.title),1)]),(0,l.Lk)("div",V,[(0,l.Lk)("div",H,[(0,l.Lk)("div",R,[T,D,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":t[5]||(t[5]=a=>Ta.contract_teacher.mes=a)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Ta.meses,(a=>((0,l.uX)(),(0,l.CE)("option",{key:a,value:a},(0,o.v_)(a),9,X)))),128))],512),[[s.u1,Ta.contract_teacher.mes]])]),(0,l.Lk)("div",N,[O,S,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":t[6]||(t[6]=a=>Ta.contract_teacher.funcionario_id=a)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Ta.funcionarios,(a=>((0,l.uX)(),(0,l.CE)("option",{key:a.id,value:a.id},(0,o.v_)(a.nome),9,J)))),128))],512),[[s.u1,Ta.contract_teacher.funcionario_id]])]),(0,l.Lk)("div",W,[K,M,(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=a=>Ta.contract_teacher.duracao=a)},null,512),[[s.Jo,Ta.contract_teacher.duracao]])]),(0,l.Lk)("div",P,[j,q,(0,l.bo)((0,l.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=a=>Ta.contract_teacher.inicio=a)},null,512),[[s.Jo,Ta.contract_teacher.inicio]])]),(0,l.Lk)("div",z,[B,G,(0,l.bo)((0,l.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=a=>Ta.contract_teacher.termino=a)},null,512),[[s.Jo,Ta.contract_teacher.termino]])]),(0,l.Lk)("div",Q,[Y,Z,(0,l.bo)((0,l.Lk)("input",{type:"checkbox",class:"form-check","onUpdate:modelValue":t[10]||(t[10]=a=>Ta.contract_teacher.status=a)},null,512),[[s.lH,Ta.contract_teacher.status]])])])]),(0,l.Lk)("div",aa,[ta,(0,l.Lk)("button",{onClick:t[11]||(t[11]=(...a)=>Da.submitForm&&Da.submitForm(...a)),class:"btn btn-primary rounded-0"},"Enviar")])])])]),(0,l.Lk)("div",ea,[(0,l.Lk)("div",la,[(0,l.Lk)("div",oa,[(0,l.Lk)("div",sa,[(0,l.Lk)("h4",null,(0,o.v_)(Ta.title),1)]),(0,l.Lk)("div",na,[(0,l.Lk)("div",ca,[(0,l.Lk)("div",ra,[da,ia,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":t[12]||(t[12]=a=>Ta.contract_teacher.funcionario_id=a)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Ta.funcionarios,(a=>((0,l.uX)(),(0,l.CE)("option",{key:a.id,value:a.id},(0,o.v_)(a.nome),9,ua)))),128))],512),[[s.u1,Ta.contract_teacher.funcionario_id]])]),(0,l.Lk)("div",ma,[ba,ka,(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=a=>Ta.contract_teacher.duracao=a)},null,512),[[s.Jo,Ta.contract_teacher.duracao]])]),(0,l.Lk)("div",La,[ha,pa,(0,l.bo)((0,l.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[14]||(t[14]=a=>Ta.contract_teacher.inicio=a)},null,512),[[s.Jo,Ta.contract_teacher.inicio]])]),(0,l.Lk)("div",fa,[va,_a,(0,l.bo)((0,l.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[15]||(t[15]=a=>Ta.contract_teacher.termino=a)},null,512),[[s.Jo,Ta.contract_teacher.termino]])]),(0,l.Lk)("div",ga,[Fa,wa,(0,l.bo)((0,l.Lk)("input",{type:"checkbox",class:"form-check","onUpdate:modelValue":t[16]||(t[16]=a=>Ta.contract_teacher.status=a)},null,512),[[s.lH,Ta.contract_teacher.status]])])])]),(0,l.Lk)("div",ya,[xa,(0,l.Lk)("button",{onClick:t[17]||(t[17]=(...a)=>Da.submitForm&&Da.submitForm(...a)),class:"btn btn-primary rounded-0"},"Enviar")])])])]),(0,l.Lk)("div",Ca,[(0,l.Lk)("div",Ea,[(0,l.Lk)("div",Aa,[(0,l.Lk)("div",$a,[(0,l.Lk)("h4",null,(0,o.v_)(Ta.title),1)]),(0,l.Lk)("div",Ia,[(0,l.Lk)("div",Ua,[(0,l.Lk)("p",null,[(0,l.eW)(" Deseja excluir "),(0,l.Lk)("b",null,(0,o.v_)(Ta.contract_teacher.nome),1),(0,l.eW)(" definitivamente da base de dados? ")])])]),(0,l.Lk)("div",Va,[Ha,(0,l.Lk)("button",{onClick:t[18]||(t[18]=(...a)=>Da.deleteForm&&Da.deleteForm(...a)),class:"btn btn-primary rounded-0"},"Confirmar")])])])])]),(0,l.bF)(Sa)])])])}var Ta=e(6587),Da=e.n(Ta),Xa=e(2833),Na=e(5424),Oa=e(608),Sa=e(9715),Ja=e(903),Wa=e(9995),Ka=e(3786);Ja.A.use(Wa.A),Ja.A.use(Ka.A);var Ma={name:"contract_employer_view",components:{Sidebar:Xa.A,Navbar:Na.A,Footer:Oa.A,DataTable:Ja.A},data(){return{title:"Previsão de Féria",dataTable:null,selectedRow:null,contratos:[],funcionarios:[],anos:[],meses:Sa.OO,contract_teacher:{id:null,funcionario_id:"",duracao:"",inicio:"",termino:"",status:!0},columns:[{data:"id"},{data:null,render:a=>`${a.Funcionario.nome}`},{data:null,render:a=>`${a.Funcionario.identificacao}`},{data:"duracao"},{data:"inicio"},{data:"termino"},{data:"status",render:a=>a?'<span class="fas fa-check-circle text-success"></span> Em Férias':'<span class="fas fa-check-circle text-danger"></span> Terminado'}],filter_data:{ano_id:""},language:Sa.BH}},mounted(){this.getEmployers(),this.getAnos()},methods:{getAnos(){Sa.FH.get("/anos/").then((a=>{this.anos=a.data})).catch((a=>{console.log(a)}))},getEmployers(){Sa.FH.get("/funcionarios/grupo/Administrativo").then((a=>{this.funcionarios=a.data})).catch((a=>{console.log(a)}))},getContracts(){const{ano_id:a}=this.filter_data;Sa.FH.get(`/ferias/ano/${a}`).then((a=>{this.contratos=a.data})).catch((a=>{console.log(a)}))},submitForm(){const a={...this.contract_teacher,...this.filter_data,user_id:this.$store.state.user.id};this.contract_teacher.id>0?Sa.FH.put(`/ferias/${this.contract_teacher.id}`,a).then((a=>{a.data.message?(this.$swal.fire({title:"Sucesso",text:a.data.message,icon:"success"}),this.getContracts(),Da()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível atualizar",icon:"error"})})).catch((a=>{console.log(a)})):Sa.FH.post("/ferias/",a).then((a=>{a.data.data.id>0?(this.$swal.fire({title:"Sucesso",text:a.data.message,icon:"success"}),this.contract_teacher={},this.getContracts(),Da()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível cadastrar",icon:"error"})})).catch((a=>{console.log(a),Da()(".btn-secondary").click(),this.clearForm(),this.$swal.fire({title:"Erro",text:a.response.data,icon:"error"})}))},deleteForm(){Sa.FH.delete(`/ferias/${this.contract_teacher.id}`).then((a=>{a.data.message&&(this.$swal.fire({title:"Sucesso",text:a.data.message,icon:"success"}),this.getContracts(),Da()(".btn-secondary").click())})).catch((a=>{console.log(a),this.$swal.fire({title:"Erro",text:a.response.data,icon:"error"})}))},selectRow(){const a=this.$refs.table.dt,t=this;a.rows({selected:!0}).every((function(){const a=this.data();t.contract_teacher=a}))},clearForm(){this.contract_teacher={}}},watch:{dataTable:{handler(){this.selectedRow=null},deep:!0}}},Pa=e(1241);const ja=(0,Pa.A)(Ma,[["render",Ra]]);var qa=ja}}]);
//# sourceMappingURL=241.4f23f76c.js.map