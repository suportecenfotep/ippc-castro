"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[921],{2704:function(e,a,s){s.r(a),s.d(a,{default:function(){return Te}});var t=s(6768),l=s(5130),d=s(4232);const o={class:"page-wrapper"},n={class:"main-container"},r={class:"content-wrapper-scroll"},c={class:"content-wrapper"},i={class:"row"},u={class:"col-12"},p={class:"card"},b={class:"d-flex p-3 pb-0"},m=(0,t.Lk)("span",{class:"fas fa-plus mx-1 fs-5"},null,-1),k=(0,t.Lk)("span",{class:"fas fa-pencil mx-1 fs-5"},null,-1),L=(0,t.Lk)("span",{class:"fas fa-trash mx-1 fs-5"},null,-1),f={class:"card-body"},h={class:"row p-2"},v={class:"col-md-6"},g=(0,t.Lk)("label",{class:"mb-1"},"Selecione o período",-1),F=(0,t.Lk)("br",null,null,-1),x={class:"d-flex align-items-center"},w=(0,t.Lk)("b",{class:"me-1"},"DE",-1),y=(0,t.Lk)("b",{class:"mx-1"},"A",-1),E={class:"col-md-6"},D=(0,t.Lk)("label",{class:"text-white mb-1"},".",-1),_=(0,t.Lk)("br",null,null,-1),C=(0,t.Lk)("span",{class:"fas fa-search"},null,-1),A=(0,t.Lk)("span",{class:"fas fa-file-pdf"},null,-1),R=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",{class:"bg-secondary"},[(0,t.Lk)("th",null,"DESCRIÇÃO"),(0,t.Lk)("th",null,"REFERÊNCIA"),(0,t.Lk)("th",null,"VALOR"),(0,t.Lk)("th",null,"ESTADO")])],-1),$={class:"modal fade","data-bs-backdrop":"static",id:"addForm"},S={class:"modal-dialog rounded-0"},V={class:"modal-content rounded-0"},P={class:"modal-header"},N={class:"modal-body"},U={class:"row"},H={class:"col-md-12 mb-3"},J=(0,t.Lk)("label",null,"Descrição",-1),I=(0,t.Lk)("br",null,null,-1),Y={class:"col-md-12 mb-3"},O=(0,t.Lk)("label",null,"Referência",-1),T=(0,t.Lk)("br",null,null,-1),W={class:"col-md-12 mb-3"},j=(0,t.Lk)("label",null,"Valor",-1),K=(0,t.Lk)("br",null,null,-1),M={class:"col-md-12 mb-3"},X=(0,t.Lk)("label",null,"Estado",-1),z=(0,t.Lk)("br",null,null,-1),Q={class:"modal-footer border-0 pt-0"},q=(0,t.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1),B={class:"modal fade","data-bs-backdrop":"static",id:"editForm"},G={class:"modal-dialog rounded-0"},Z={class:"modal-content rounded-0"},ee={class:"modal-header"},ae={class:"modal-body"},se={class:"row"},te={class:"col-md-12 mb-3"},le=(0,t.Lk)("label",null,"Descrição",-1),de=(0,t.Lk)("br",null,null,-1),oe={class:"col-md-12 mb-3"},ne=(0,t.Lk)("label",null,"Referência",-1),re=(0,t.Lk)("br",null,null,-1),ce={class:"col-md-12 mb-3"},ie=(0,t.Lk)("label",null,"Valor",-1),ue=(0,t.Lk)("br",null,null,-1),pe={class:"col-md-12 mb-3"},be=(0,t.Lk)("label",null,"Estado",-1),me=(0,t.Lk)("br",null,null,-1),ke={class:"modal-footer border-0 pt-0"},Le=(0,t.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1),fe={class:"modal fade","data-bs-backdrop":"static",id:"removeForm"},he={class:"modal-dialog rounded-0"},ve={class:"modal-content rounded-0"},ge={class:"modal-header"},Fe={class:"modal-body"},xe={class:"row"},we={class:"modal-footer border-0 pt-0"},ye=(0,t.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1);function Ee(e,a,s,Ee,De,_e){const Ce=(0,t.g2)("Sidebar"),Ae=(0,t.g2)("Navbar"),Re=(0,t.g2)("DataTable"),$e=(0,t.g2)("Footer");return(0,t.uX)(),(0,t.CE)("div",o,[(0,t.bF)(Ce),(0,t.Lk)("div",n,[(0,t.bF)(Ae,{page:"Finanças / Despesas"}),(0,t.Lk)("div",r,[(0,t.Lk)("div",c,[(0,t.Lk)("div",i,[(0,t.Lk)("div",u,[(0,t.Lk)("div",p,[(0,t.Lk)("div",b,[(0,t.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>_e.clearForm&&_e.clearForm(...e)),"data-bs-toggle":"modal","data-bs-target":"#addForm",class:"btn btn-primary btn-sm fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[m,(0,t.eW)(" Adicionar ")]),De.despesas.length>0?((0,t.uX)(),(0,t.CE)("button",{key:0,onClick:a[1]||(a[1]=(...e)=>_e.selectRow&&_e.selectRow(...e)),"data-bs-toggle":"modal","data-bs-target":"#editForm",class:"btn btn-info btn-dark btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[k,(0,t.eW)(" Editar ")])):(0,t.Q3)("",!0),De.despesas.length>0?((0,t.uX)(),(0,t.CE)("button",{key:1,onClick:a[2]||(a[2]=(...e)=>_e.selectRow&&_e.selectRow(...e)),"data-bs-toggle":"modal","data-bs-target":"#removeForm",class:"btn btn-danger btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[L,(0,t.eW)(" Excluir ")])):(0,t.Q3)("",!0)]),(0,t.Lk)("div",f,[(0,t.Lk)("div",h,[(0,t.Lk)("div",v,[g,F,(0,t.Lk)("div",x,[w,(0,t.bo)((0,t.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=e=>De.filter_data.start_date=e)},null,512),[[l.Jo,De.filter_data.start_date]]),y,(0,t.bo)((0,t.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":a[4]||(a[4]=e=>De.filter_data.end_date=e)},null,512),[[l.Jo,De.filter_data.end_date]])])]),(0,t.Lk)("div",E,[D,_,(0,t.Lk)("button",{onClick:a[5]||(a[5]=(...e)=>_e.getDespesas&&_e.getDespesas(...e)),class:"btn btn-info text-uppercase fw-bold"},[C,(0,t.eW)(" Filtrar ")]),De.despesas.length>0?((0,t.uX)(),(0,t.CE)("button",{key:0,onClick:a[6]||(a[6]=(...e)=>_e.generateExpensesPDF&&_e.generateExpensesPDF(...e)),class:"btn btn-danger mx-2 text-uppercase fw-bold"},[A,(0,t.eW)(" Imprimir relatório ")])):(0,t.Q3)("",!0)])]),(0,t.bF)(Re,{ref:"table",data:De.despesas,columns:De.columns,options:{select:!0,language:De.language},class:"display table table-striped table-bordered"},{default:(0,t.k6)((()=>[R])),_:1},8,["data","columns","options"])])])])]),(0,t.Lk)("div",$,[(0,t.Lk)("div",S,[(0,t.Lk)("div",V,[(0,t.Lk)("div",P,[(0,t.Lk)("h4",null,(0,d.v_)(De.title),1)]),(0,t.Lk)("div",N,[(0,t.Lk)("div",U,[(0,t.Lk)("div",H,[J,I,(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[7]||(a[7]=e=>De.despesa.descricao=e)},null,512),[[l.Jo,De.despesa.descricao]])]),(0,t.Lk)("div",Y,[O,T,(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[8]||(a[8]=e=>De.despesa.referencia=e)},null,512),[[l.Jo,De.despesa.referencia]])]),(0,t.Lk)("div",W,[j,K,(0,t.bo)((0,t.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":a[9]||(a[9]=e=>De.despesa.valor=e)},null,512),[[l.Jo,De.despesa.valor]])]),(0,t.Lk)("div",M,[X,z,(0,t.bo)((0,t.Lk)("input",{type:"checkbox",class:"form-check","onUpdate:modelValue":a[10]||(a[10]=e=>De.despesa.status=e)},null,512),[[l.lH,De.despesa.status]])])])]),(0,t.Lk)("div",Q,[q,(0,t.Lk)("button",{onClick:a[11]||(a[11]=(...e)=>_e.submitForm&&_e.submitForm(...e)),class:"btn btn-primary rounded-0"},"Enviar")])])])]),(0,t.Lk)("div",B,[(0,t.Lk)("div",G,[(0,t.Lk)("div",Z,[(0,t.Lk)("div",ee,[(0,t.Lk)("h4",null,(0,d.v_)(De.title),1)]),(0,t.Lk)("div",ae,[(0,t.Lk)("div",se,[(0,t.Lk)("div",te,[le,de,(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[12]||(a[12]=e=>De.despesa.descricao=e)},null,512),[[l.Jo,De.despesa.descricao]])]),(0,t.Lk)("div",oe,[ne,re,(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[13]||(a[13]=e=>De.despesa.referencia=e)},null,512),[[l.Jo,De.despesa.referencia]])]),(0,t.Lk)("div",ce,[ie,ue,(0,t.bo)((0,t.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":a[14]||(a[14]=e=>De.despesa.valor=e)},null,512),[[l.Jo,De.despesa.valor]])]),(0,t.Lk)("div",pe,[be,me,(0,t.bo)((0,t.Lk)("input",{type:"checkbox",class:"form-check","onUpdate:modelValue":a[15]||(a[15]=e=>De.despesa.status=e)},null,512),[[l.lH,De.despesa.status]])])])]),(0,t.Lk)("div",ke,[Le,(0,t.Lk)("button",{onClick:a[16]||(a[16]=(...e)=>_e.submitForm&&_e.submitForm(...e)),class:"btn btn-primary rounded-0"},"Enviar")])])])]),(0,t.Lk)("div",fe,[(0,t.Lk)("div",he,[(0,t.Lk)("div",ve,[(0,t.Lk)("div",ge,[(0,t.Lk)("h4",null,(0,d.v_)(De.title),1)]),(0,t.Lk)("div",Fe,[(0,t.Lk)("div",xe,[(0,t.Lk)("p",null,[(0,t.eW)(" Deseja excluir "),(0,t.Lk)("b",null,(0,d.v_)(De.despesa.descricao),1),(0,t.eW)(" definitivamente da base de dados? ")])])]),(0,t.Lk)("div",we,[ye,(0,t.Lk)("button",{onClick:a[17]||(a[17]=(...e)=>_e.deleteForm&&_e.deleteForm(...e)),class:"btn btn-primary rounded-0"},"Confirmar")])])])])]),(0,t.bF)($e)])])])}var De=s(6587),_e=s.n(De),Ce=s(3362),Ae=s(8808),Re=s(6313),$e=s(9715),Se=s(1749),Ve=(s(5839),s(9148)),Pe=s.n(Ve),Ne=s(903),Ue=s(9995),He=s(3786),Je=s(782);Ne.A.use(Ue.A),Ne.A.use(He.A);var Ie={name:"despesa_view",components:{Sidebar:Ce.A,Navbar:Ae.A,Footer:Re.A,DataTable:Ne.A},data(){return{title:"Despesa",dataTable:null,selectedRow:null,despesas:[],despesa:{id:null,descricao:"",referencia:"",valor:0,status:!0},filter_data:{start_date:"",end_date:""},columns:[{data:"descricao"},{data:"referencia"},{data:"valor",render:e=>`${(0,$e.jq)(e,2,",",".")}`},{data:"status",render:e=>e?'<span class="fas fa-check-circle text-success"></span> Pago':'<span class="fas fa-check-circle text-danger"></span> Não Pago'}],language:$e.BH}},mounted(){this.getAll()},methods:{getDespesas(){const{start_date:e,end_date:a}=this.filter_data;$e.FH.get(`/despesas/start/${e}/end/${a}`).then((e=>{this.despesas=e.data})).catch((e=>{console.log(e)}))},getAll(){$e.FH.get("/despesas/").then((e=>{this.despesas=e.data})).catch((e=>{console.log(e)}))},generateExpensesPDF(){const e=new Se["default"],a=[{header:"DESCRIÇÃO",dataKey:"descricao"},{header:"REFERÊNCIA",dataKey:"referencia"},{header:"VALOR",dataKey:"valor"},{header:"ESTADO",dataKey:"estado"}],s=this.despesas.map((e=>({descricao:e.descricao,referencia:e.referencia,valor:this.numberFormat(e.valor,2,",","."),estado:e.status?"Pago":"Não Pago"})));e.addImage(`${$e.OZ}/api/mediafiles/logo.jpeg`,"JPEG",150,10,45,25),e.setFontSize(12),e.text("IPPC - DESPESAS",14,10),e.text("NIF: 123456789",14,16),e.text("Contactos: +123456789",14,22),e.text("Endereço: Rua Exemplo, 123",14,28),e.text("Email: contato@ippc.pt",14,34),e.setFontSize(14),e.text(`Relatório de despesas de ${Pe()(this.filter_data.start_date).format("DD-MM-YYYY")} a ${Pe()(this.filter_data.end_date).format("DD-MM-YYYY")}`,14,50),e.autoTable(a,s,{margin:{top:55},theme:"grid"}),e.output("dataurlnewwindow")},numberFormat:$e.jq,submitForm(){const e={...this.despesa,user_id:this.$store.state.user.id};this.despesa.id>0?$e.FH.put(`/despesas/${this.despesa.id}`,e).then((e=>{e.data.message?(this.$swal.fire({title:"Sucesso",text:e.data.message,icon:"success"}),this.getDespesas(),_e()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível atualizar",icon:"error"})})).catch((e=>{console.log(e)})):$e.FH.post("/despesas/",e).then((e=>{e.data.data.id>0?(this.$swal.fire({title:"Sucesso",text:e.data.message,icon:"success"}),this.getDespesas(),_e()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível cadastrar",icon:"error"})})).catch((e=>{console.log(e)}))},deleteForm(){$e.FH.delete(`/despesas/${this.despesa.id}`).then((e=>{e.data.message?(this.$swal.fire({title:"Sucesso",text:e.data.message,icon:"success"}),this.getDespesas(),_e()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível excluir",icon:"error"})})).catch((e=>{console.log(e)}))},selectRow(){const e=this.$refs.table.dt,a=this;e.rows({selected:!0}).every((function(){const e=this.data();a.despesa=e}))},clearForm(){this.despesa={}}},computed:{...(0,Je.aH)(["user"])},watch:{dataTable:{handler(){this.selectedRow=null},deep:!0}}},Ye=s(1241);const Oe=(0,Ye.A)(Ie,[["render",Ee]]);var Te=Oe}}]);
//# sourceMappingURL=921.1ddba998.js.map