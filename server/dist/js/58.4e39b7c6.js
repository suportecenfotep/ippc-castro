"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[58],{524:function(a,e,t){t.d(e,{A:function(){return u}});var l=t(6768);const s={class:"text-center"},d=(0,l.Fv)('<div id="loading-wrapper"><div class="spinner"><div class="line1"></div><div class="line2"></div><div class="line3"></div><div class="line4"></div><div class="line5"></div><div class="line6"></div></div></div>',1),r=[d];function n(a,e,t,d,n,o){return(0,l.uX)(),(0,l.CE)("div",s,r)}var o={name:"loader_view"},i=t(1241);const c=(0,i.A)(o,[["render",n]]);var u=c},9228:function(a,e,t){t.r(e),t.d(e,{default:function(){return G}});var l=t(6768),s=t(5130),d=t(4232);const r={class:"page-wrapper"},n={class:"main-container"},o={class:"content-wrapper-scroll"},i={class:"content-wrapper"},c={class:"row"},u={class:"col-12"},p={class:"card p-2"},L={class:"row p-2"},m={class:"col-md-6"},v=(0,l.Lk)("label",{class:"mb-1"},"Selecione o período",-1),A=(0,l.Lk)("br",null,null,-1),b={class:"d-flex align-items-center"},f=(0,l.Lk)("b",{class:"me-1"},"DE",-1),k=(0,l.Lk)("b",{class:"mx-1"},"A",-1),h={class:"col-md-6"},g=(0,l.Lk)("label",{class:"text-white mb-1"},".",-1),D=(0,l.Lk)("br",null,null,-1),T=(0,l.Lk)("span",{class:"fas fa-search"},null,-1),F=(0,l.Lk)("span",{class:"fas fa-file-pdf"},null,-1),R={class:"card"},x=(0,l.Lk)("div",{class:"card-header"},[(0,l.Lk)("h5",null,"ENTRADAS")],-1),S={class:"card-body"},C=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",{class:"bg-secondary"},[(0,l.Lk)("th",null,"DESCRIÇÃO"),(0,l.Lk)("th",null,"ESTUDANTE"),(0,l.Lk)("th",null,"VALOR"),(0,l.Lk)("th",null,"FUNCIONARIO"),(0,l.Lk)("th",null,"DATA")])],-1),O={class:"card-footer"},I={class:"float-end"},E={class:"card"},Y=(0,l.Lk)("div",{class:"card-header"},[(0,l.Lk)("h5",null,"SAIDAS")],-1),y={class:"card-body"},_=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",{class:"bg-secondary"},[(0,l.Lk)("th",null,"DESCRIÇÃO"),(0,l.Lk)("th",null,"REFERÊNCIA"),(0,l.Lk)("th",null,"VALOR"),(0,l.Lk)("th",null,"FUNCIONARIO"),(0,l.Lk)("th",null,"DATA")])],-1),N={class:"card-footer"},w={class:"float-end"};function U(a,e,t,U,K,P){const H=(0,l.g2)("Sidebar"),j=(0,l.g2)("Navbar"),$=(0,l.g2)("DataTable"),q=(0,l.g2)("Footer"),z=(0,l.g2)("Loader");return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.bF)(H),(0,l.Lk)("div",n,[(0,l.bF)(j,{page:"Tesouraria / Fluxo de Caixa"}),(0,l.Lk)("div",o,[(0,l.Lk)("div",i,[(0,l.Lk)("div",c,[(0,l.Lk)("div",u,[(0,l.Lk)("div",p,[(0,l.Lk)("div",L,[(0,l.Lk)("div",m,[v,A,(0,l.Lk)("div",b,[f,(0,l.bo)((0,l.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>K.filter_data.start_date=a)},null,512),[[s.Jo,K.filter_data.start_date]]),k,(0,l.bo)((0,l.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>K.filter_data.end_date=a)},null,512),[[s.Jo,K.filter_data.end_date]])])]),(0,l.Lk)("div",h,[g,D,(0,l.Lk)("button",{onClick:e[2]||(e[2]=(...a)=>P.filterFluxo&&P.filterFluxo(...a)),class:"btn btn-info text-uppercase fw-bold"},[T,(0,l.eW)(" Filtrar ")]),K.entradas.length>0?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:e[3]||(e[3]=(...a)=>P.generatePDF&&P.generatePDF(...a)),class:"btn btn-danger mx-2 text-uppercase fw-bold"},[F,(0,l.eW)(" Imprimir relatório ")])):(0,l.Q3)("",!0)])])]),(0,l.Lk)("div",R,[x,(0,l.Lk)("div",S,[(0,l.bF)($,{ref:"table",data:K.entradas,columns:K.entradasColums,options:{select:!0,language:K.language},class:"display table table-striped table-bordered"},{default:(0,l.k6)((()=>[C])),_:1},8,["data","columns","options"])]),(0,l.Lk)("div",O,[(0,l.Lk)("div",I,[(0,l.Lk)("p",null,[(0,l.eW)("Resultado: "),(0,l.Lk)("b",null,(0,d.v_)(P.numberFormat(K.totalReceita,2,",","."))+"Kz",1)])])])]),(0,l.Lk)("div",E,[Y,(0,l.Lk)("div",y,[(0,l.bF)($,{ref:"table",data:K.despesas,columns:K.saidasColums,options:{select:!0,language:K.language},class:"display table table-striped table-bordered"},{default:(0,l.k6)((()=>[_])),_:1},8,["data","columns","options"])]),(0,l.Lk)("div",N,[(0,l.Lk)("div",w,[(0,l.Lk)("p",null,[(0,l.eW)("Resultado: "),(0,l.Lk)("b",null,(0,d.v_)(P.numberFormat(K.totalDespesa,2,",","."))+"Kz",1)])])])])])])]),(0,l.bF)(q)]),K.isLoading?((0,l.uX)(),(0,l.Wv)(z,{key:0})):(0,l.Q3)("",!0)])])}var K=t(2833),P=t(5424),H=t(608),j=t(524),$=t(9715),q=t(9148),z=t.n(q),M=t(903),V=t(9995),X=t(3786),W=t(1749);t(5839);M.A.use(V.A),M.A.use(X.A);var J={name:"fluxo_de_caixa_view",components:{Sidebar:K.A,Navbar:P.A,Footer:H.A,Loader:j.A,DataTable:M.A},data(){return{title:"Fluxo de Caixa",dataTable:null,selectedRow:null,despesas:[],entradas:[],isLoading:!1,totalDespesa:0,totalReceita:0,entradasColums:[{data:"descricao"},{data:null,render:a=>`${a.Estudante.nome}`},{data:"totalPrice",render:a=>`${(0,$.jq)(a,2,",",".")}`},{data:null,render:a=>`${a.User.nome}`},{data:"createdAt",render:a=>`${z()(a.createdAt).format("DD-MM-YYYY HH:mm:ss")}`}],saidasColums:[{data:"descricao"},{data:"referencia"},{data:"valor",render:a=>`${(0,$.jq)(a,2,",",".")}`},{data:null,render:a=>`${a.User.nome}`},{data:"createdAt",render:a=>`${z()(a.createdAt).format("DD-MM-YYYY HH:mm:ss")}`}],filter_data:{start_date:"",end_date:""},language:$.BH}},mounted(){},methods:{filterFluxo(){this.totalDespesa=0,this.totalReceita=0;const{start_date:a,end_date:e}=this.filter_data;$.FH.get(`/fluxo-de-caixa/start/${a}/end/${e}`).then((a=>{this.despesas=a.data.saidas,this.entradas=a.data.entradas,a.data.saidas.map((a=>{this.totalDespesa+=a.valor})),a.data.entradas.map((a=>{this.totalReceita+=a.totalPrice}))})).catch((a=>{console.log(a)}))},generatePDF(){this.isLoading=!0;const a=new W["default"],e=[{header:"DESCRIÇÃO",dataKey:"descricao"},{header:"ESTUDANTE",dataKey:"estudante"},{header:"VALOR",dataKey:"totalPrice"},{header:"FUNCIONÁRIO",dataKey:"funcionario"},{header:"DATA",dataKey:"createdAt"}],t=[{header:"DESCRIÇÃO",dataKey:"descricao"},{header:"REFERÊNCIA",dataKey:"referencia"},{header:"VALOR",dataKey:"valor"},{header:"FUNCIONÁRIO",dataKey:"funcionario"},{header:"DATA",dataKey:"createdAt"}],l=this.entradas.map((a=>({descricao:a.descricao||"",estudante:a.Estudante?.nome||"",totalPrice:(0,$.jq)(a.totalPrice,2,",","."),funcionario:a.User?.nome||"",createdAt:z()(a.createdAt).format("DD-MM-YYYY HH:mm:ss")||""}))),s=this.despesas.map((a=>({descricao:a.descricao||"",referencia:a.referencia||"",valor:(0,$.jq)(a.valor,2,",","."),funcionario:a.User?.nome||"",createdAt:z()(a.createdAt).format("DD-MM-YYYY HH:mm:ss")||""})));a.addImage("http://192.168.1.127:9000/api/mediafiles/castro.jpeg","JPEG",90,15,25,25),a.setFontSize(12),a.text("INSTITUTO POLITÉCNICO PRIVADO CASTRO",58,50),a.text('"A Luz do Saber"',85,56),a.setFontSize(14),a.text("FLUXO DE CAIXA",20,64),a.setFontSize(12),a.text("ENTRADAS",20,80),a.autoTable({columns:e,body:l,margin:{top:90},theme:"grid"}),a.setFontSize(12),a.text("SAÍDAS",20,a.autoTable.previous.finalY+20),a.autoTable({columns:t,body:s,margin:{top:90},theme:"grid"});const d=this.totalReceita,r=this.totalDespesa,n=d-r;a.setFontSize(12),a.text("TOTAL ENTRADAS:",20,a.autoTable.previous.finalY+20),a.text((0,$.jq)(d,2,",","."),120,a.autoTable.previous.finalY+20),a.text("TOTAL SAÍDAS:",20,a.autoTable.previous.finalY+30),a.text((0,$.jq)(r,2,",","."),120,a.autoTable.previous.finalY+30),a.text("SALDO A TRANSITAR:",20,a.autoTable.previous.finalY+40),a.text((0,$.jq)(n,2,",","."),120,a.autoTable.previous.finalY+40),this.isLoading=!1,a.output("dataurlnewwindow")},moment:z(),numberFormat:$.jq}},Q=t(1241);const B=(0,Q.A)(J,[["render",U]]);var G=B}}]);
//# sourceMappingURL=58.4e39b7c6.js.map