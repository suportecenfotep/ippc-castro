"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[867],{524:function(t,a,e){e.d(a,{A:function(){return p}});var n=e(6768);const s={class:"text-center"},d=(0,n.Fv)('<div id="loading-wrapper"><div class="spinner"><div class="line1"></div><div class="line2"></div><div class="line3"></div><div class="line4"></div><div class="line5"></div><div class="line6"></div></div></div>',1),l=[d];function r(t,a,e,d,r,o){return(0,n.uX)(),(0,n.CE)("div",s,l)}var o={name:"loader_view"},i=e(1241);const c=(0,i.A)(o,[["render",r]]);var p=c},9074:function(t,a,e){e.r(a),e.d(a,{default:function(){return B}});var n=e(6768),s=e(5130),d=e(4232);const l={class:"page-wrapper"},r={class:"main-container"},o={class:"content-wrapper-scroll"},i={class:"content-wrapper"},c={class:"row"},p={class:"col-12"},u={class:"card p-2"},h={class:"row p-2"},m={class:"col-md-6"},b=(0,n.Lk)("label",{class:"mb-1"},"Selecione o per√≠odo",-1),f=(0,n.Lk)("br",null,null,-1),k={class:"d-flex align-items-center"},L=(0,n.Lk)("b",{class:"me-1"},"DE",-1),v=(0,n.Lk)("b",{class:"mx-1"},"A",-1),g={class:"col-md-6"},_=(0,n.Lk)("label",{class:"text-white mb-1"},".",-1),x=(0,n.Lk)("br",null,null,-1),D=(0,n.Lk)("span",{class:"fas fa-search"},null,-1),A=(0,n.Lk)("span",{class:"fas fa-file-pdf"},null,-1),$={class:"card"},Y=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h5",null,"ENTRADAS")],-1),F={class:"card-body"},R=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",{class:"bg-secondary"},[(0,n.Lk)("th",null,"DESCRI√á√ÉO"),(0,n.Lk)("th",null,"ESTUDANTE"),(0,n.Lk)("th",null,"VALOR"),(0,n.Lk)("th",null,"FUNCION√ÅRIO"),(0,n.Lk)("th",null,"DATA")])],-1),w={class:"card-footer"},y={class:"float-end"},C={class:"card"},E=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h5",null,"SA√çDAS")],-1),T={class:"card-body"},I=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",{class:"bg-secondary"},[(0,n.Lk)("th",null,"DESCRI√á√ÉO"),(0,n.Lk)("th",null,"REFER√äNCIA"),(0,n.Lk)("th",null,"VALOR"),(0,n.Lk)("th",null,"FUNCION√ÅRIO"),(0,n.Lk)("th",null,"DATA")])],-1),O={class:"card-footer"},S={class:"float-end"};function M(t,a,e,M,N,z){const H=(0,n.g2)("Sidebar"),j=(0,n.g2)("Navbar"),U=(0,n.g2)("DataTable"),P=(0,n.g2)("Footer"),q=(0,n.g2)("Loader");return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(H),(0,n.Lk)("div",r,[(0,n.bF)(j,{page:"Tesouraria / Fluxo de Caixa"}),(0,n.Lk)("div",o,[(0,n.Lk)("div",i,[(0,n.Lk)("div",c,[(0,n.Lk)("div",p,[(0,n.Lk)("div",u,[(0,n.Lk)("div",h,[(0,n.Lk)("div",m,[b,f,(0,n.Lk)("div",k,[L,(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=t=>N.filter_data.start_date=t)},null,512),[[s.Jo,N.filter_data.start_date]]),v,(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=t=>N.filter_data.end_date=t)},null,512),[[s.Jo,N.filter_data.end_date]])])]),(0,n.Lk)("div",g,[_,x,(0,n.Lk)("button",{onClick:a[2]||(a[2]=(...t)=>z.filterFluxo&&z.filterFluxo(...t)),class:"btn btn-info text-uppercase fw-bold"},[D,(0,n.eW)(" Filtrar ")]),N.entradas.length>0||N.despesas.length>0?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:a[3]||(a[3]=(...t)=>z.generatePDF&&z.generatePDF(...t)),class:"btn btn-danger mx-2 text-uppercase fw-bold"},[A,(0,n.eW)(" Imprimir relat√≥rio ")])):(0,n.Q3)("",!0)])])]),(0,n.Lk)("div",$,[Y,(0,n.Lk)("div",F,[(0,n.bF)(U,{data:N.entradas,columns:N.entradasColums,options:{select:!0,language:N.language},class:"display table table-striped table-bordered"},{default:(0,n.k6)((()=>[R])),_:1},8,["data","columns","options"])]),(0,n.Lk)("div",w,[(0,n.Lk)("div",y,[(0,n.Lk)("p",null,[(0,n.eW)(" Resultado: "),(0,n.Lk)("b",null,(0,d.v_)(z.numberFormat(N.totalReceita,2,",","."))+" Kz",1)])])])]),(0,n.Lk)("div",C,[E,(0,n.Lk)("div",T,[(0,n.bF)(U,{data:N.despesas,columns:N.saidasColums,options:{select:!0,language:N.language},class:"display table table-striped table-bordered"},{default:(0,n.k6)((()=>[I])),_:1},8,["data","columns","options"])]),(0,n.Lk)("div",O,[(0,n.Lk)("div",S,[(0,n.Lk)("p",null,[(0,n.eW)(" Resultado: "),(0,n.Lk)("b",null,(0,d.v_)(z.numberFormat(N.totalDespesa,2,",","."))+" Kz",1)])])])])])])]),(0,n.bF)(P),N.isLoading?((0,n.uX)(),(0,n.Wv)(q,{key:0})):(0,n.Q3)("",!0)])])])}var N=e(3362),z=e(8808),H=e(6313),j=e(524),U=e(9715),P=e(9148),q=e.n(P),K=e(903),V=e(9995),X=e(3786);K.A.use(V.A),K.A.use(X.A);var W={name:"fluxo_de_caixa_view",components:{Sidebar:N.A,Navbar:z.A,Footer:H.A,Loader:j.A,DataTable:K.A},data(){return{despesas:[],entradas:[],totalDespesa:0,totalReceita:0,isLoading:!1,filter_data:{start_date:"",end_date:""},entradasColums:[{data:"descricao"},{data:null,render:t=>`${t.Estudante?.nome||""}`},{data:"totalPrice",render:t=>`${(0,U.jq)(t,2,",",".")}`},{data:null,render:t=>`${t.User?.nome||""}`},{data:"createdAt",render:t=>q()(t).format("DD-MM-YYYY HH:mm:ss")}],saidasColums:[{data:"descricao"},{data:"referencia"},{data:"valor",render:t=>`${(0,U.jq)(t,2,",",".")}`},{data:null,render:t=>`${t.User?.nome||""}`},{data:"createdAt",render:t=>q()(t).format("DD-MM-YYYY HH:mm:ss")}],language:U.BH}},methods:{filterFluxo(){this.totalDespesa=0,this.totalReceita=0;const{start_date:t,end_date:a}=this.filter_data;t&&a?U.FH.get(`/fluxo-de-caixa/start/${t}/end/${a}`).then((t=>{this.despesas=t.data.saidas,this.entradas=t.data.entradas,t.data.saidas.forEach((t=>{this.totalDespesa+=t.valor})),t.data.entradas.forEach((t=>{this.totalReceita+=t.totalPrice}))})).catch((t=>console.error(t))):this.$swal.fire({title:"Notifica√ß√£o",icon:"warning",text:"Preencha todos os campos"})},generatePDF(){if(0===this.entradas.length&&0===this.despesas.length)return void this.$swal.fire({title:"Aten√ß√£o",icon:"info",text:"N√£o h√° dados para imprimir."});const t=window.open("","_blank"),a=`${U.OZ}/api/mediafiles/castro.jpeg`,e=(0,U.jq)(this.totalReceita,2,",","."),n=(0,U.jq)(this.totalDespesa,2,",","."),s=(0,U.jq)(this.totalReceita-this.totalDespesa,2,",","."),d=this.entradas.map((t=>`\n        <tr>\n          <td>${t.descricao||""}</td>\n          <td>${t.Estudante?.nome||""}</td>\n          <td>${(0,U.jq)(t.totalPrice,2,",",".")} Kz</td>\n          <td>${t.User?.nome||""}</td>\n          <td>${q()(t.createdAt).format("DD-MM-YYYY HH:mm:ss")}</td>\n        </tr>`)).join(""),l=this.despesas.map((t=>`\n        <tr>\n          <td>${t.descricao||""}</td>\n          <td>${t.referencia||""}</td>\n          <td>${(0,U.jq)(t.valor,2,",",".")} Kz</td>\n          <td>${t.User?.nome||""}</td>\n          <td>${q()(t.createdAt).format("DD-MM-YYYY HH:mm:ss")}</td>\n        </tr>`)).join(""),r=`\n        <html>\n        <head>\n          <title>Relat√≥rio de Fluxo de Caixa</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              margin: 20px;\n              color: #222;\n            }\n            header {\n              text-align: center;\n              border-bottom: 2px solid #333;\n              margin-bottom: 10px;\n              padding-bottom: 10px;\n            }\n            header img {\n              width: 80px;\n              height: 80px;\n              border-radius: 8px;\n            }\n            h1 {\n              margin-top: 10px;\n              font-size: 20px;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-bottom: 20px;\n            }\n            th, td {\n              border: 1px solid #999;\n              padding: 6px 8px;\n              text-align: left;\n              font-size: 13px;\n            }\n            th {\n              background-color: #f2f2f2;\n            }\n            .totais {\n              margin-top: 10px;\n              text-align: right;\n              font-size: 14px;\n            }\n            footer {\n              text-align: center;\n              font-size: 12px;\n              margin-top: 40px;\n              color: #555;\n            }\n            @media print {\n              button { display: none; }\n              body { margin: 0; }\n            }\n          </style>\n        </head>\n        <body>\n          <header>\n            <img src="${a}" alt="Logo"/>\n            <h2>INSTITUTO POLIT√âCNICO PRIVADO CASTRO</h2>\n            <p>"A Luz do Saber"</p>\n            <h1>RELAT√ìRIO DE FLUXO DE CAIXA</h1>\n            <p>Per√≠odo: ${q()(this.filter_data.start_date).format("DD/MM/YYYY")} a ${q()(this.filter_data.end_date).format("DD/MM/YYYY")}</p>\n          </header>\n\n          <h3>Entradas</h3>\n          <table>\n            <thead>\n              <tr>\n                <th>Descri√ß√£o</th>\n                <th>Estudante</th>\n                <th>Valor</th>\n                <th>Funcion√°rio</th>\n                <th>Data</th>\n              </tr>\n            </thead>\n            <tbody>${d}</tbody>\n          </table>\n\n          <h3>Sa√≠das</h3>\n          <table>\n            <thead>\n              <tr>\n                <th>Descri√ß√£o</th>\n                <th>Refer√™ncia</th>\n                <th>Valor</th>\n                <th>Funcion√°rio</th>\n                <th>Data</th>\n              </tr>\n            </thead>\n            <tbody>${l}</tbody>\n          </table>\n\n          <div class="totais">\n            <p><strong>Total de Entradas:</strong> ${e} Kz</p>\n            <p><strong>Total de Sa√≠das:</strong> ${n} Kz</p>\n            <p><strong>Saldo a Transitar:</strong> ${s} Kz</p>\n          </div>\n\n          <footer>\n            <p>Gerado em ${q()().format("DD/MM/YYYY HH:mm")}</p>\n            <p>______________________________</p>\n            <p>Assinatura do Respons√°vel</p>\n          </footer>\n\n          <button onclick="window.print()">üñ®Ô∏è Imprimir</button>\n        </body>\n        </html>\n      `;t.document.write(r),t.document.close()},numberFormat:U.jq}},J=e(1241);const Q=(0,J.A)(W,[["render",M]]);var B=Q}}]);
//# sourceMappingURL=867.6fa24ed1.js.map