"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[113],{2484:function(a,e,l){l.r(e),l.d(e,{default:function(){return de}});var t=l(6768),s=l(4232),o=l(5130);const n={class:"page-wrapper"},d={class:"main-container"},i={class:"content-wrapper-scroll"},r={class:"content-wrapper"},c={class:"row"},u={class:"col-12"},m={class:"card"},b={class:"card-body"},k={class:"row mb-2"},p={class:"col-md-2"},f=(0,t.Lk)("label",null,"Selecione o Ano",-1),v=(0,t.Lk)("br",null,null,-1),L=["value"],h={class:"col-md-2"},g=(0,t.Lk)("label",null,"Selecione o Curso",-1),_=(0,t.Lk)("br",null,null,-1),w=["value"],x={class:"col-md-2"},C=(0,t.Lk)("label",null,"Selecione o Periodo",-1),E=(0,t.Lk)("br",null,null,-1),y=["value"],F={class:"col-md-2"},$=(0,t.Lk)("label",null,"Selecione a Classe",-1),S=(0,t.Lk)("br",null,null,-1),A=["value"],X={class:"col-md-2"},T=(0,t.Lk)("label",null,"Selecione a Turma",-1),I=(0,t.Lk)("br",null,null,-1),D=["value"],N={class:"col-md-2"},H=(0,t.Lk)("label",{class:"text-white"},".",-1),R=(0,t.Lk)("br",null,null,-1),W=(0,t.Lk)("span",{style:{"font-size":"22px"},class:"fas fa-search mx-1"},null,-1),z={class:"col-md-8 d-flex ps-2 pb-0"},O={key:0},M=(0,t.Lk)("label",{class:"text-white"},".",-1),U=(0,t.Lk)("br",null,null,-1),K=(0,t.Lk)("span",{style:{"font-size":"22px"},class:"fas fa-file-pdf mx-1"},null,-1),P={key:1},Q=(0,t.Lk)("label",{class:"text-white"},".",-1),V=(0,t.Lk)("br",null,null,-1),Z=(0,t.Lk)("span",{style:{"font-size":"22px"},class:"fas fa-file-pdf mx-1"},null,-1),j={key:2},q=(0,t.Lk)("label",{class:"text-white"},".",-1),B=(0,t.Lk)("br",null,null,-1),G=(0,t.Lk)("span",{class:"fas fa-trash mx-1 fs-5"},null,-1),J={key:3},Y=(0,t.Lk)("label",{class:"text-white"},".",-1),aa=(0,t.Lk)("br",null,null,-1),ea=(0,t.Lk)("span",{class:"fas fa-user-slash mx-1 fs-5"},null,-1),la={key:4},ta=(0,t.Lk)("label",{class:"text-white"},".",-1),sa=(0,t.Lk)("br",null,null,-1),oa=(0,t.Lk)("span",{class:"fas fa-user mx-1 fs-5"},null,-1),na={key:5},da=(0,t.Lk)("label",{class:"text-white"},".",-1),ia=(0,t.Lk)("br",null,null,-1),ra=(0,t.Lk)("span",{style:{"font-size":"22px"},class:"fas fa-file-pdf mx-1"},null,-1),ca={key:6},ua=(0,t.Lk)("label",{class:"text-white"},".",-1),ma=(0,t.Lk)("br",null,null,-1),ba=(0,t.Lk)("span",{style:{"font-size":"22px"},class:"fas fa-file-pdf mx-1"},null,-1),ka=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",{class:"bg-secondary"},[(0,t.Lk)("th",null,"NOME"),(0,t.Lk)("th",null,"IDENTIFICAÇÃO"),(0,t.Lk)("th",null,"TELEFONE"),(0,t.Lk)("th",null,"CURSO"),(0,t.Lk)("th",null,"ESTADO")])],-1),pa={class:"modal fade",id:"removeForm"},fa={class:"modal-dialog rounded-0"},va={class:"modal-content rounded-0"},La={class:"modal-header"},ha={class:"modal-body"},ga={class:"row"},_a={class:"modal-footer border-0 pt-0"},wa=(0,t.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1),xa={class:"modal fade",id:"cancelRegistration"},Ca={class:"modal-dialog rounded-0"},Ea={class:"modal-content rounded-0"},ya={class:"modal-header"},Fa={class:"modal-body"},$a={class:"row"},Sa={class:"modal-footer border-0 pt-0"},Aa=(0,t.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1),Xa={class:"modal fade",id:"updateState"},Ta={class:"modal-dialog rounded-0"},Ia={class:"modal-content rounded-0"},Da={class:"modal-header"},Na={class:"modal-body pt-0"},Ha={class:"row"},Ra={class:"col-md-12 mb-2"},Wa=(0,t.Lk)("label",null,"Turma",-1),za=(0,t.Lk)("br",null,null,-1),Oa=["value"],Ma={class:"col-md-12"},Ua=(0,t.Lk)("label",null,"Estado",-1),Ka=(0,t.Lk)("br",null,null,-1),Pa=["value"],Qa={class:"modal-footer border-0 pt-0"},Va=(0,t.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1);function Za(a,e,l,Za,ja,qa){const Ba=(0,t.g2)("Sidebar"),Ga=(0,t.g2)("Navbar"),Ja=(0,t.g2)("DataTable"),Ya=(0,t.g2)("Footer");return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.bF)(Ba),(0,t.Lk)("div",d,[(0,t.bF)(Ga,{page:"Secretaria / Estudantes Matriculados"}),(0,t.Lk)("div",i,[(0,t.Lk)("div",r,[(0,t.Lk)("div",c,[(0,t.Lk)("div",u,[(0,t.Lk)("div",m,[(0,t.Lk)("div",b,[(0,t.Lk)("div",k,[(0,t.Lk)("div",p,[f,v,(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":e[0]||(e[0]=a=>ja.filter_data.ano_id=a)},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ja.anos,(a=>((0,t.uX)(),(0,t.CE)("option",{key:a.id,value:a.id},(0,s.v_)(a.nome),9,L)))),128))],512),[[o.u1,ja.filter_data.ano_id]])]),(0,t.Lk)("div",h,[g,_,(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=a=>ja.filter_data.curso_id=a),onChange:e[2]||(e[2]=(...a)=>qa.getSalas&&qa.getSalas(...a))},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ja.cursos,(a=>((0,t.uX)(),(0,t.CE)("option",{key:a.id,value:a.id},(0,s.v_)(a.nome),9,w)))),128))],544),[[o.u1,ja.filter_data.curso_id]])]),(0,t.Lk)("div",x,[C,E,(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":e[3]||(e[3]=a=>ja.filter_data.periodo_id=a),onChange:e[4]||(e[4]=(...a)=>qa.getSalas&&qa.getSalas(...a))},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ja.periodos,(a=>((0,t.uX)(),(0,t.CE)("option",{key:a.id,value:a.id},(0,s.v_)(a.nome),9,y)))),128))],544),[[o.u1,ja.filter_data.periodo_id]])]),(0,t.Lk)("div",F,[$,S,(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":e[5]||(e[5]=a=>ja.filter_data.classe_id=a),onChange:e[6]||(e[6]=(...a)=>qa.getSalas&&qa.getSalas(...a))},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ja.classes,(a=>((0,t.uX)(),(0,t.CE)("option",{key:a.id,value:a.id},(0,s.v_)(a.nome),9,A)))),128))],544),[[o.u1,ja.filter_data.classe_id]])]),(0,t.Lk)("div",X,[T,I,(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":e[7]||(e[7]=a=>ja.filter_data.sala_id=a)},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ja.salas,(a=>((0,t.uX)(),(0,t.CE)("option",{key:a.id,value:a.id},(0,s.v_)(a.nome),9,D)))),128))],512),[[o.u1,ja.filter_data.sala_id]])]),(0,t.Lk)("div",N,[H,R,(0,t.Lk)("button",{onClick:e[8]||(e[8]=(...a)=>qa.getMatriculados&&qa.getMatriculados(...a)),class:"btn btn-primary btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[W,(0,t.eW)(" Pesquisar ")])]),(0,t.Lk)("div",z,[ja.matriculados.length>0?((0,t.uX)(),(0,t.CE)("div",O,[M,U,(0,t.Lk)("button",{onClick:e[9]||(e[9]=(...a)=>qa.generatePDF&&qa.generatePDF(...a)),class:"btn btn-info btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[K,(0,t.eW)(" lista ")])])):(0,t.Q3)("",!0),ja.matriculados.length>0&&"Administrador"===ja.user.nivel||"IT"===ja.user.nivel||"Secretaria"===ja.user.nivel?((0,t.uX)(),(0,t.CE)("div",P,[Q,V,(0,t.Lk)("button",{onClick:e[10]||(e[10]=(...a)=>qa.generateComprovativo&&qa.generateComprovativo(...a)),class:"btn btn-info btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[Z,(0,t.eW)(" comprovativo ")])])):(0,t.Q3)("",!0),ja.matriculados.length>0&&"Administrador"===ja.user.nivel||"IT"===ja.user.nivel||"Secretaria"===ja.user.nivel?((0,t.uX)(),(0,t.CE)("div",j,[q,B,(0,t.Lk)("button",{onClick:e[11]||(e[11]=(...a)=>qa.selectRow&&qa.selectRow(...a)),"data-bs-toggle":"modal","data-bs-target":"#removeForm",class:"btn btn-danger btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[G,(0,t.eW)(" Excluir ")])])):(0,t.Q3)("",!0),ja.matriculados.length>0&&"Administrador"===ja.user.nivel||"IT"===ja.user.nivel||"Secretaria"===ja.user.nivel?((0,t.uX)(),(0,t.CE)("div",J,[Y,aa,(0,t.Lk)("button",{style:{background:"black"},onClick:e[12]||(e[12]=(...a)=>qa.selectRow&&qa.selectRow(...a)),"data-bs-toggle":"modal","data-bs-target":"#cancelRegistration",class:"btn btn-dark btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[ea,(0,t.eW)(" Anular ")])])):(0,t.Q3)("",!0),ja.matriculados.length>0&&"Administrador"===ja.user.nivel||"IT"===ja.user.nivel||"Secretaria"===ja.user.nivel?((0,t.uX)(),(0,t.CE)("div",la,[ta,sa,(0,t.Lk)("button",{onClick:e[13]||(e[13]=(...a)=>qa.selectRow&&qa.selectRow(...a)),"data-bs-toggle":"modal","data-bs-target":"#updateState",class:"btn btn-dark btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[oa,(0,t.eW)(" Atualizar ")])])):(0,t.Q3)("",!0),ja.matriculados.length>0&&"Administrador"===ja.user.nivel||"IT"===ja.user.nivel||"Secretaria"===ja.user.nivel?((0,t.uX)(),(0,t.CE)("div",na,[da,ia,(0,t.Lk)("button",{onClick:e[14]||(e[14]=(...a)=>qa.mapadefaltas&&qa.mapadefaltas(...a)),class:"btn btn-info btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[ra,(0,t.eW)(" Faltas ")])])):(0,t.Q3)("",!0),ja.matriculados.length>0&&"Administrador"===ja.user.nivel||"IT"===ja.user.nivel||"Secretaria"===ja.user.nivel?((0,t.uX)(),(0,t.CE)("div",ca,[ua,ma,(0,t.Lk)("button",{onClick:e[15]||(e[15]=(...a)=>qa.generateDeclaracao&&qa.generateDeclaracao(...a)),class:"btn btn-info btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[ba,(0,t.eW)(" Declaração ")])])):(0,t.Q3)("",!0)])]),(0,t.bF)(Ja,{ref:"table",data:ja.matriculados,columns:ja.columns,options:{select:!0,language:ja.language},class:"display table table-striped table-bordered"},{default:(0,t.k6)((()=>[ka])),_:1},8,["data","columns","options"])])])])]),(0,t.Lk)("div",pa,[(0,t.Lk)("div",fa,[(0,t.Lk)("div",va,[(0,t.Lk)("div",La,[(0,t.Lk)("h4",null,(0,s.v_)(ja.title),1)]),(0,t.Lk)("div",ha,[(0,t.Lk)("div",ga,[(0,t.Lk)("p",null,[(0,t.eW)(" Deseja excluir "),(0,t.Lk)("b",null,(0,s.v_)(ja.matricula.Estudante.nome),1),(0,t.eW)(" definitivamente da base de dados? ")])])]),(0,t.Lk)("div",_a,[wa,(0,t.Lk)("button",{onClick:e[16]||(e[16]=(...a)=>qa.deleteForm&&qa.deleteForm(...a)),class:"btn btn-primary rounded-0"},"Confirmar")])])])]),(0,t.Lk)("div",xa,[(0,t.Lk)("div",Ca,[(0,t.Lk)("div",Ea,[(0,t.Lk)("div",ya,[(0,t.Lk)("h4",null,(0,s.v_)(ja.title),1)]),(0,t.Lk)("div",Fa,[(0,t.Lk)("div",$a,[(0,t.Lk)("p",null,[(0,t.eW)(" Deseja anular esta matrícula "),(0,t.Lk)("b",null,(0,s.v_)(ja.matricula.Estudante.nome),1),(0,t.eW)(" ? ")])])]),(0,t.Lk)("div",Sa,[Aa,(0,t.Lk)("button",{onClick:e[17]||(e[17]=(...a)=>qa.atualizarEstado&&qa.atualizarEstado(...a)),class:"btn btn-primary rounded-0"},"Confirmar")])])])]),(0,t.Lk)("div",Xa,[(0,t.Lk)("div",Ta,[(0,t.Lk)("div",Ia,[(0,t.Lk)("div",Da,[(0,t.Lk)("h4",null,(0,s.v_)(ja.title),1)]),(0,t.Lk)("div",Na,[(0,t.Lk)("div",Ha,[(0,t.Lk)("div",Ra,[Wa,za,(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":e[18]||(e[18]=a=>ja.matricula.sala_id=a)},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ja.turmas,(a=>((0,t.uX)(),(0,t.CE)("option",{key:a.id,value:a.id},(0,s.v_)(a.nome),9,Oa)))),128))],512),[[o.u1,ja.matricula.sala_id]])]),(0,t.Lk)("div",Ma,[Ua,Ka,(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":e[19]||(e[19]=a=>ja.matricula.estado=a)},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ja.estados,(a=>((0,t.uX)(),(0,t.CE)("option",{key:a,value:a},(0,s.v_)(a),9,Pa)))),128))],512),[[o.u1,ja.matricula.estado]])])])]),(0,t.Lk)("div",Qa,[Va,(0,t.Lk)("button",{onClick:e[20]||(e[20]=(...a)=>qa.atualizarEstado&&qa.atualizarEstado(...a)),class:"btn btn-primary rounded-0"},"Confirmar")])])])])]),(0,t.bF)(Ya)])])])}var ja=l(6587),qa=l.n(ja),Ba=l(7532),Ga=l(3213),Ja=l(3936),Ya=l(9715),ae=l(903),ee=l(9995),le=l(3786),te=l(782);ae.A.use(ee.A),ae.A.use(le.A);var se={name:"matricula_view",components:{Sidebar:Ba.A,Navbar:Ga.A,Footer:Ja.A,DataTable:ae.A},data(){return{title:"Matrícula",dataTable:null,selectedRow:null,matriculados:[],estudantes:[],anos:[],cursos:[],periodos:[],salas:[],turmas:[],classes:[],user:{},estados:["Estudando","Cancelada","Transita","Não Transita"],matricula:{id:null,Estudante:{},estudante_id:""},filter_data:{ano_id:"",curso_id:"",sala_id:"",periodo_id:"",classe_id:""},columns:[{data:null,render:a=>null===a.Estudante?"Não definido":a.Estudante.nome},{data:null,render:a=>null===a.Estudante?"Não definido":a.Estudante.identificacao},{data:null,render:a=>null===a.Estudante?"Não definido":a.Estudante.telefone},{data:null,render:a=>`${a.Curso.nome}`},{data:"estado",render:a=>"Estudando"===a?`<b class = "text-secondary">${a}</b>`:"Transita"===a?`<b class = "text-success">${a}</b>`:`<b class = "text-danger">${a}</b>`}],language:Ya.BH}},mounted(){this.getEstudantes(),this.getAnos(),this.getCursos(),this.getPeriodos(),this.getClasses(),this.getTurmas(),this.user=this.$store.state.user},methods:{generatePDF(){const{ano_id:a,curso_id:e,periodo_id:l,classe_id:t,sala_id:s}=this.filter_data;window.open(`${Ya.OZ}/api/documentos/lista-matriculados/ano/${a}/curso/${e}/periodo/${l}/classe/${t}/sala/${s}`,"_blank")},mapadefaltas(){const{ano_id:a,curso_id:e,periodo_id:l,classe_id:t,sala_id:s}=this.filter_data;window.open(`${Ya.OZ}/api/documentos/mapa-de-faltas/ano/${a}/curso/${e}/periodo/${l}/classe/${t}/sala/${s}`,"_blank")},getMatriculados(){const{ano_id:a,sala_id:e}=this.filter_data;Ya.FH.get(`/matricula/ano/${a}/turma/${e}/`).then((a=>{a.data.length>0?this.matriculados=a.data:(this.matriculados=[],this.$swal.fire({title:"Notificação",icon:"warning",text:"Nenhum Estudante Encontrado"}))})).catch((a=>{console.log(a)}))},getEstudantes(){Ya.FH.get("/estudantes/").then((a=>{this.estudantes=a.data})).catch((a=>{console.log(a)}))},getAnos(){Ya.FH.get("/anos/status/1/").then((a=>{this.anos=a.data})).catch((a=>{console.log(a)}))},getCursos(){Ya.FH.get("/cursos/").then((a=>{this.cursos=a.data})).catch((a=>{console.log(a)}))},getSalas(){const{periodo_id:a,curso_id:e,classe_id:l}=this.filter_data;Ya.FH.get(`/salas/curso/${e}/classe/${l}/periodo/${a}`).then((a=>{this.salas=a.data})).catch((a=>{console.log(a)}))},getTurmas(){Ya.FH.get("/salas/").then((a=>{this.turmas=a.data})).catch((a=>{console.log(a)}))},getClasses(){Ya.FH.get("/classes/").then((a=>{this.classes=a.data})).catch((a=>{console.log(a)}))},getPeriodos(){Ya.FH.get("/periodos/").then((a=>{this.periodos=a.data})).catch((a=>{console.log(a)}))},atualizarEstado(){Ya.FH.put(`/matricula/${this.matricula.id}`,this.matricula).then((a=>{a.data.message?(this.$swal.fire({title:a.data.message,icon:"success"}),this.getMatriculados(),qa()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível excluir",icon:"error"})})).catch((a=>{console.log(a)}))},deleteForm(){Ya.FH.delete(`/matricula/${this.matricula.id}`).then((a=>{a.data.message?(this.$swal.fire({title:a.data.message,icon:"success"}),this.getMatriculados(),qa()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível excluir",icon:"error"})})).catch((a=>{console.log(a)}))},selectRow(){const a=this.$refs.table.dt,e=this;a.rows({selected:!0}).every((function(){const a=this.data();e.matricula=a}))},generateComprovativo(){const a=this.$refs.table.dt,e=this;a.rows({selected:!0}).every((function(){const a=this.data();e.matricula=a})),window.open(`${Ya.OZ}/api/documentos/boletim-matricula/${this.matricula.id}/`,"_blank")},generateDeclaracao(){const a=this.$refs.table.dt,e=this;a.rows({selected:!0}).every((function(){const a=this.data();e.matricula=a})),window.open(`${Ya.OZ}/api/documentos/declaracao-frequencia/${this.matricula.id}/`,"_blank")},clearForm(){this.matricula={}}},watch:{dataTable:{handler(){this.selectedRow=null},deep:!0}},computed:{...(0,te.aH)(["user"])}},oe=l(1241);const ne=(0,oe.A)(se,[["render",Za]]);var de=ne}}]);
//# sourceMappingURL=113.8f09cec4.js.map