"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[486],{7e3:function(e,t,a){a.r(t),a.d(t,{default:function(){return be}});var s=a(6768),l=a(4232),o=a(5130);const i={class:"page-wrapper"},d={class:"main-container"},n={class:"content-wrapper-scroll"},r={class:"content-wrapper"},c={class:"row"},u={class:"col-12"},m={class:"card"},h={class:"card-body"},b={class:"row mb-2"},g={class:"col-md-3"},k=(0,s.Lk)("label",null,"Selecione o Ano",-1),p=(0,s.Lk)("br",null,null,-1),L=["value"],f={class:"col-md-3"},v=(0,s.Lk)("label",null,"Selecione o Curso",-1),_=(0,s.Lk)("br",null,null,-1),E=["value"],w={class:"col-md-3"},C=(0,s.Lk)("label",null,"Selecione o Periodo",-1),F=(0,s.Lk)("br",null,null,-1),x=["value"],$={class:"col-md-3"},A=(0,s.Lk)("label",null,"Selecione a Classe",-1),S=(0,s.Lk)("br",null,null,-1),O=["value"],T={class:"col-md-3"},N=(0,s.Lk)("label",null,"Selecione a Turma",-1),y=(0,s.Lk)("br",null,null,-1),I=["value"],R={class:"col-md-3 d-flex px-0"},D=(0,s.Lk)("label",{class:"text-white"},".",-1),M=(0,s.Lk)("br",null,null,-1),H=(0,s.Lk)("span",{style:{"font-size":"22px"},class:"fas fa-search mx-1"},null,-1),P=(0,s.Lk)("label",{class:"text-white"},".",-1),U=(0,s.Lk)("br",null,null,-1),X=(0,s.Lk)("span",{style:{"font-size":"22px"},class:"fas fa-file-pdf mx-1"},null,-1),K=(0,s.Lk)("label",{class:"text-white"},".",-1),V=(0,s.Lk)("br",null,null,-1),z=(0,s.Lk)("span",{class:"fas fa-trash mx-1 fs-5"},null,-1),W=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",{class:"bg-secondary"},[(0,s.Lk)("th",null,"NOME"),(0,s.Lk)("th",null,"IDENTIFICAÇÃO"),(0,s.Lk)("th",null,"TELEFONE"),(0,s.Lk)("th",null,"CURSO"),(0,s.Lk)("th",null,"ENCARREGADO"),(0,s.Lk)("th",null,"CONTACTO")])],-1),j={class:"modal fade",id:"removeForm"},G={class:"modal-dialog rounded-0"},q={class:"modal-content rounded-0"},B={class:"modal-header"},J={class:"modal-body"},Q={class:"row"},Y={class:"modal-footer border-0 pt-0"},Z=(0,s.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1);function ee(e,t,a,ee,te,ae){const se=(0,s.g2)("Sidebar"),le=(0,s.g2)("Navbar"),oe=(0,s.g2)("DataTable"),ie=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(se),(0,s.Lk)("div",d,[(0,s.bF)(le,{page:"Secretaria / Lista de Estudantes Matriculados"}),(0,s.Lk)("div",n,[(0,s.Lk)("div",r,[(0,s.Lk)("div",c,[(0,s.Lk)("div",u,[(0,s.Lk)("div",m,[(0,s.Lk)("div",h,[(0,s.Lk)("div",b,[(0,s.Lk)("div",g,[k,p,(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":t[0]||(t[0]=e=>te.filter_data.ano_id=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(te.anos,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.nome),9,L)))),128))],512),[[o.u1,te.filter_data.ano_id]])]),(0,s.Lk)("div",f,[v,_,(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":t[1]||(t[1]=e=>te.filter_data.curso_id=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(te.cursos,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.nome),9,E)))),128))],512),[[o.u1,te.filter_data.curso_id]])]),(0,s.Lk)("div",w,[C,F,(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":t[2]||(t[2]=e=>te.filter_data.periodo_id=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(te.periodos,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.nome),9,x)))),128))],512),[[o.u1,te.filter_data.periodo_id]])]),(0,s.Lk)("div",$,[A,S,(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":t[3]||(t[3]=e=>te.filter_data.classe_id=e),onChange:t[4]||(t[4]=(...e)=>ae.getSalas&&ae.getSalas(...e))},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(te.classes,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.nome),9,O)))),128))],544),[[o.u1,te.filter_data.classe_id]])]),(0,s.Lk)("div",T,[N,y,(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":t[5]||(t[5]=e=>te.filter_data.sala_id=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(te.salas,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.nome),9,I)))),128))],512),[[o.u1,te.filter_data.sala_id]])]),(0,s.Lk)("div",R,[(0,s.Lk)("div",null,[D,M,(0,s.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>ae.getMatriculados&&ae.getMatriculados(...e)),class:"btn btn-primary btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[H,(0,s.eW)(" Pesquisar ")])]),(0,s.Lk)("div",null,[P,U,(0,s.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>ae.generatePDF&&ae.generatePDF(...e)),class:"btn btn-info btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[X,(0,s.eW)(" imprimir ")])]),(0,s.Lk)("div",null,[K,V,(0,s.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>ae.selectRow&&ae.selectRow(...e)),"data-bs-toggle":"modal","data-bs-target":"#removeForm",class:"btn btn-danger btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[z,(0,s.eW)(" Excluir ")])])])]),(0,s.bF)(oe,{ref:"table",data:te.matriculados,columns:te.columns,options:{select:!0,language:te.language},class:"display table table-striped table-bordered"},{default:(0,s.k6)((()=>[W])),_:1},8,["data","columns","options"])])])])]),(0,s.Lk)("div",j,[(0,s.Lk)("div",G,[(0,s.Lk)("div",q,[(0,s.Lk)("div",B,[(0,s.Lk)("h4",null,(0,l.v_)(te.title),1)]),(0,s.Lk)("div",J,[(0,s.Lk)("div",Q,[(0,s.Lk)("p",null,[(0,s.eW)(" Deseja excluir "),(0,s.Lk)("b",null,(0,l.v_)(te.matricula.Estudante.nome),1),(0,s.eW)(" definitivamente da base de dados? ")])])]),(0,s.Lk)("div",Y,[Z,(0,s.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>ae.deleteForm&&ae.deleteForm(...e)),class:"btn btn-primary rounded-0"},"Confirmar")])])])])]),(0,s.bF)(ie)])])])}var te=a(6587),ae=a.n(te),se=a(2833),le=a(5424),oe=a(608),ie=a(9715),de=a(903),ne=a(9995),re=a(3786),ce=a(1749);a(5839);de.A.use(ne.A),de.A.use(re.A);var ue={name:"matricula_view",components:{Sidebar:se.A,Navbar:le.A,Footer:oe.A,DataTable:de.A},data(){return{title:"Matrícula",dataTable:null,selectedRow:null,matriculados:[],estudantes:[],anos:[],cursos:[],periodos:[],salas:[],classes:[],matricula:{id:null,Estudante:{},estudante_id:""},filter_data:{ano_id:"",curso_id:"",sala_id:"",periodo_id:"",classe_id:""},columns:[{data:null,render:e=>`${e.Estudante.nome}`},{data:null,render:e=>`${e.Estudante.identificacao}`},{data:null,render:e=>`${e.Estudante.telefone}`},{data:null,render:e=>`${e.Curso.nome}`},{data:null,render:e=>`${e.Estudante.encarregado}`},{data:null,render:e=>`${e.Estudante.contacto_encarregado}`}],language:ie.BH}},mounted(){this.getEstudantes(),this.getAnos(),this.getCursos(),this.getPeriodos(),this.getClasses()},methods:{generatePDF(){let e=1;const t=new ce["default"],a=[{header:"Nº",dataKey:"id"},{header:"NOME DO ESTUDANTE",dataKey:"estudante"}],s=this.matriculados.map((t=>({id:e++,estudante:t.Estudante.nome})));t.addImage("http://192.168.1.127:9000/api/mediafiles/castro.jpeg","JPEG",90,15,25,25),t.setFontSize(12),t.text("INSTITUTO POLITÉCNICO PRIVADO CASTRO",58,50),t.text('"A Luz do Saber"',85,56),t.text(`ANO LECTIVO: ${this.matriculados[0].AnoLectivo.nome}`,14,78),t.text(`CURSO: ${this.matriculados[0].Curso.nome}`,14,86),t.text(`PERÍODO:${this.matriculados[0].Periodo.nome}`,150,78),t.text(`TURMA:${this.matriculados[0].Sala.nome}`,150,86),t.setFontSize(14),t.text("RELAÇÃO NOMINAL DE ESTUDANTES MATRICULADOS",40,64),t.autoTable(a,s,{margin:{top:90},theme:"grid"}),t.output("dataurlnewwindow")},getMatriculados(){const{ano_id:e,sala_id:t}=this.filter_data;ie.FH.get(`/matricula/ano/${e}/turma/${t}/`).then((e=>{this.matriculados=e.data})).catch((e=>{console.log(e)}))},getEstudantes(){ie.FH.get("/estudantes/").then((e=>{this.estudantes=e.data})).catch((e=>{console.log(e)}))},getAnos(){ie.FH.get("/anos/status/1/").then((e=>{this.anos=e.data})).catch((e=>{console.log(e)}))},getCursos(){ie.FH.get("/cursos/").then((e=>{this.cursos=e.data})).catch((e=>{console.log(e)}))},getSalas(){const{periodo_id:e,curso_id:t,classe_id:a}=this.filter_data;ie.FH.get(`/salas/curso/${t}/classe/${a}/periodo/${e}`).then((e=>{this.salas=e.data})).catch((e=>{console.log(e)}))},getClasses(){ie.FH.get("/classes/").then((e=>{this.classes=e.data})).catch((e=>{console.log(e)}))},getPeriodos(){ie.FH.get("/periodos/").then((e=>{this.periodos=e.data})).catch((e=>{console.log(e)}))},getStudent(){ie.FH.get(`/inscricao/numero/${this.filter_data.numero}`).then((e=>{null!=e.data?(this.estudante=e.data,this.registration.estudante_id=e.data.id,this.showStudent=!0,this.showRegistration=!0):(this.$swal.fire({title:"Notificação",icon:"warning",text:"Nenhum Estudante Encontrado"}),this.showStudent=!1,this.showRegistration=!1)})).catch((e=>{console.log(e)}))},submitForm(){const e={...this.matricula,...this.filter_data,user_id:this.$store.state.user.id,estado:"Estudando"};this.matricula.id>0?ie.FH.put(`/matricula/${this.matricula.id}`,e).then((e=>{e.data.message?(this.$swal.fire({title:e.data.message,icon:"success"}),this.gerarComprovativo(e.data.data.id,e.data.data.curso_id),this.getMatriculados(),ae()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível atualizar",icon:"error"})})).catch((e=>{this.$swal.fire({title:"Erro",icon:"error",text:e.response.data.message})})):ie.FH.post("/matricula/",e).then((e=>{e.data.data.id>0?(this.$swal.fire({title:e.data.message,icon:"success"}),this.gerarComprovativo(e.data.data.id,e.data.data.curso_id),this.getMatriculados(),ae()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível cadastrar",icon:"error"})})).catch((e=>{this.$swal.fire({title:"Erro",icon:"error",text:e.response.data.message})}))},deleteForm(){ie.FH.delete(`/matricula/${this.matricula.id}`).then((e=>{e.data.message?(this.$swal.fire({title:e.data.message,icon:"success"}),this.getMatriculados(),ae()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível excluir",icon:"error"})})).catch((e=>{console.log(e)}))},selectRow(){const e=this.$refs.table.dt,t=this;e.rows({selected:!0}).every((function(){const e=this.data();t.matricula=e}))},clearForm(){this.matricula={}}},watch:{dataTable:{handler(){this.selectedRow=null},deep:!0}}},me=a(1241);const he=(0,me.A)(ue,[["render",ee]]);var be=he}}]);
//# sourceMappingURL=486.4c73698a.js.map