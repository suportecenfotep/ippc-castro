"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[80],{524:function(a,e,t){t.d(e,{A:function(){return u}});var s=t(6768);const l={class:"text-center"},d=(0,s.Fv)('<div id="loading-wrapper"><div class="spinner"><div class="line1"></div><div class="line2"></div><div class="line3"></div><div class="line4"></div><div class="line5"></div><div class="line6"></div></div></div>',1),r=[d];function n(a,e,t,d,n,o){return(0,s.uX)(),(0,s.CE)("div",l,r)}var o={name:"loader_view"},i=t(1241);const c=(0,i.A)(o,[["render",n]]);var u=c},2425:function(a,e,t){t.r(e),t.d(e,{default:function(){return B}});var s=t(6768),l=t(5130),d=t(4232);const r={class:"page-wrapper"},n={class:"main-container"},o={class:"content-wrapper-scroll"},i={class:"content-wrapper"},c={class:"row"},u={class:"col-12"},p={class:"card p-2"},m={class:"row p-2"},L={class:"col-md-6"},f=(0,s.Lk)("label",{class:"mb-1"},"Selecione o período",-1),v=(0,s.Lk)("br",null,null,-1),b={class:"d-flex align-items-center"},A=(0,s.Lk)("b",{class:"me-1"},"DE",-1),k=(0,s.Lk)("b",{class:"mx-1"},"A",-1),h={class:"col-md-6"},g=(0,s.Lk)("label",{class:"text-white mb-1"},".",-1),D=(0,s.Lk)("br",null,null,-1),T=(0,s.Lk)("span",{class:"fas fa-search"},null,-1),F=(0,s.Lk)("span",{class:"fas fa-file-pdf"},null,-1),x={class:"card"},R=(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("h5",null,"ENTRADAS")],-1),S={class:"card-body"},C=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",{class:"bg-secondary"},[(0,s.Lk)("th",null,"DESCRIÇÃO"),(0,s.Lk)("th",null,"ESTUDANTE"),(0,s.Lk)("th",null,"VALOR"),(0,s.Lk)("th",null,"FUNCIONARIO"),(0,s.Lk)("th",null,"DATA")])],-1),O={class:"card-footer"},_={class:"float-end"},I={class:"card"},E=(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("h5",null,"SAIDAS")],-1),Y={class:"card-body"},w=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",{class:"bg-secondary"},[(0,s.Lk)("th",null,"DESCRIÇÃO"),(0,s.Lk)("th",null,"REFERÊNCIA"),(0,s.Lk)("th",null,"VALOR"),(0,s.Lk)("th",null,"FUNCIONARIO"),(0,s.Lk)("th",null,"DATA")])],-1),y={class:"card-footer"},N={class:"float-end"};function U(a,e,t,U,$,K){const P=(0,s.g2)("Sidebar"),H=(0,s.g2)("Navbar"),j=(0,s.g2)("DataTable"),q=(0,s.g2)("Footer"),z=(0,s.g2)("Loader");return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(P),(0,s.Lk)("div",n,[(0,s.bF)(H,{page:"Tesouraria / Fluxo de Caixa"}),(0,s.Lk)("div",o,[(0,s.Lk)("div",i,[(0,s.Lk)("div",c,[(0,s.Lk)("div",u,[(0,s.Lk)("div",p,[(0,s.Lk)("div",m,[(0,s.Lk)("div",L,[f,v,(0,s.Lk)("div",b,[A,(0,s.bo)((0,s.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>$.filter_data.start_date=a)},null,512),[[l.Jo,$.filter_data.start_date]]),k,(0,s.bo)((0,s.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>$.filter_data.end_date=a)},null,512),[[l.Jo,$.filter_data.end_date]])])]),(0,s.Lk)("div",h,[g,D,(0,s.Lk)("button",{onClick:e[2]||(e[2]=(...a)=>K.filterFluxo&&K.filterFluxo(...a)),class:"btn btn-info text-uppercase fw-bold"},[T,(0,s.eW)(" Filtrar ")]),$.entradas.length>0?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e[3]||(e[3]=(...a)=>K.generatePDF&&K.generatePDF(...a)),class:"btn btn-danger mx-2 text-uppercase fw-bold"},[F,(0,s.eW)(" Imprimir relatório ")])):(0,s.Q3)("",!0)])])]),(0,s.Lk)("div",x,[R,(0,s.Lk)("div",S,[(0,s.bF)(j,{ref:"table",data:$.entradas,columns:$.entradasColums,options:{select:!0,language:$.language},class:"display table table-striped table-bordered"},{default:(0,s.k6)((()=>[C])),_:1},8,["data","columns","options"])]),(0,s.Lk)("div",O,[(0,s.Lk)("div",_,[(0,s.Lk)("p",null,[(0,s.eW)("Resultado: "),(0,s.Lk)("b",null,(0,d.v_)(K.numberFormat($.totalReceita,2,",","."))+"Kz",1)])])])]),(0,s.Lk)("div",I,[E,(0,s.Lk)("div",Y,[(0,s.bF)(j,{ref:"table",data:$.despesas,columns:$.saidasColums,options:{select:!0,language:$.language},class:"display table table-striped table-bordered"},{default:(0,s.k6)((()=>[w])),_:1},8,["data","columns","options"])]),(0,s.Lk)("div",y,[(0,s.Lk)("div",N,[(0,s.Lk)("p",null,[(0,s.eW)("Resultado: "),(0,s.Lk)("b",null,(0,d.v_)(K.numberFormat($.totalDespesa,2,",","."))+"Kz",1)])])])])])])]),(0,s.bF)(q)]),$.isLoading?((0,s.uX)(),(0,s.Wv)(z,{key:0})):(0,s.Q3)("",!0)])])}var $=t(7417),K=t(8808),P=t(6313),H=t(524),j=t(9715),q=t(9148),z=t.n(q),M=t(903),V=t(9995),X=t(3786),W=t(1749);t(5839);M.A.use(V.A),M.A.use(X.A);var J={name:"fluxo_de_caixa_view",components:{Sidebar:$.A,Navbar:K.A,Footer:P.A,Loader:H.A,DataTable:M.A},data(){return{title:"Fluxo de Caixa",dataTable:null,selectedRow:null,despesas:[],entradas:[],isLoading:!1,totalDespesa:0,totalReceita:0,entradasColums:[{data:"descricao"},{data:null,render:a=>`${a.Estudante.nome}`},{data:"totalPrice",render:a=>`${(0,j.jq)(a,2,",",".")}`},{data:null,render:a=>`${a.User.nome}`},{data:"createdAt",render:a=>`${z()(a.createdAt).format("DD-MM-YYYY HH:mm:ss")}`}],saidasColums:[{data:"descricao"},{data:"referencia"},{data:"valor",render:a=>`${(0,j.jq)(a,2,",",".")}`},{data:null,render:a=>`${a.User.nome}`},{data:"createdAt",render:a=>`${z()(a.createdAt).format("DD-MM-YYYY HH:mm:ss")}`}],filter_data:{start_date:"",end_date:""},language:j.BH}},mounted(){},methods:{filterFluxo(){this.totalDespesa=0,this.totalReceita=0;const{start_date:a,end_date:e}=this.filter_data;a&&e?j.FH.get(`/fluxo-de-caixa/start/${a}/end/${e}`).then((a=>{this.despesas=a.data.saidas,this.entradas=a.data.entradas,a.data.saidas.map((a=>{this.totalDespesa+=a.valor})),a.data.entradas.map((a=>{this.totalReceita+=a.totalPrice}))})).catch((a=>{console.log(a)})):this.$swal.fire({title:"Notificação",icon:"warning",text:"Preencha todos os campos"})},gerarDocumento(){this.isLoading=!0;const a=new W["default"],e=[{header:"DESCRIÇÃO",dataKey:"descricao"},{header:"ESTUDANTE",dataKey:"estudante"},{header:"VALOR",dataKey:"totalPrice"},{header:"FUNCIONÁRIO",dataKey:"funcionario"},{header:"DATA",dataKey:"createdAt"}],t=[{header:"DESCRIÇÃO",dataKey:"descricao"},{header:"REFERÊNCIA",dataKey:"referencia"},{header:"VALOR",dataKey:"valor"},{header:"FUNCIONÁRIO",dataKey:"funcionario"},{header:"DATA",dataKey:"createdAt"}],s=this.entradas.map((a=>({descricao:a.descricao||"",estudante:a.Estudante?.nome||"",totalPrice:(0,j.jq)(a.totalPrice,2,",","."),funcionario:a.User?.nome||"",createdAt:z()(a.createdAt).format("DD-MM-YYYY HH:mm:ss")||""}))),l=this.despesas.map((a=>({descricao:a.descricao||"",referencia:a.referencia||"",valor:(0,j.jq)(a.valor,2,",","."),funcionario:a.User?.nome||"",createdAt:z()(a.createdAt).format("DD-MM-YYYY HH:mm:ss")||""})));a.addImage(`${j.OZ}/api/mediafiles/castro.jpeg`,"JPEG",90,15,25,25),a.setFontSize(12),a.text("INSTITUTO POLITÉCNICO PRIVADO CASTRO",58,50),a.text('"A Luz do Saber"',85,56),a.setFontSize(14),a.text("FLUXO DE CAIXA",20,64),a.setFontSize(12),a.text("ENTRADAS",20,80),a.autoTable({columns:e,body:s,margin:{top:90},theme:"grid"}),a.setFontSize(12),a.text("SAÍDAS",20,a.autoTable.previous.finalY+20),a.autoTable({columns:t,body:l,margin:{top:90},theme:"grid"});const d=this.totalReceita,r=this.totalDespesa,n=d-r;a.setFontSize(12),a.text("TOTAL ENTRADAS:",20,a.autoTable.previous.finalY+20),a.text((0,j.jq)(d,2,",","."),120,a.autoTable.previous.finalY+20),a.text("TOTAL SAÍDAS:",20,a.autoTable.previous.finalY+30),a.text((0,j.jq)(r,2,",","."),120,a.autoTable.previous.finalY+30),a.text("SALDO A TRANSITAR:",20,a.autoTable.previous.finalY+40),a.text((0,j.jq)(n,2,",","."),120,a.autoTable.previous.finalY+40),this.isLoading=!1,a.output("dataurlnewwindow")},generatePDF(){this.isLoading=!0;const{start_date:a,end_date:e}=this.filter_data;window.open(`${j.OZ}/api/documentos/fluxo-de-caixa/start/${a}/end/${e}`,"_blank"),this.isLoading=!1},moment:z(),numberFormat:j.jq}},Q=t(1241);const Z=(0,Q.A)(J,[["render",U]]);var B=Z}}]);
//# sourceMappingURL=80.4148db71.js.map