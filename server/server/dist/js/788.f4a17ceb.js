"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[788],{2950:function(e,a,t){t.r(a),t.d(a,{default:function(){return Ee}});var l=t(6768),s=t(4232),o=t(5130);const d={class:"page-wrapper"},n={class:"main-container"},i={class:"content-wrapper-scroll"},r={class:"content-wrapper"},c={class:"row"},u={class:"col-12"},m={class:"card"},h={class:"card-body"},g={class:"row mb-2"},k={class:"col-md-3"},b=(0,l.Lk)("label",null,"Selecione o Ano",-1),p=(0,l.Lk)("br",null,null,-1),v=["value"],f={class:"col-md-3"},L=(0,l.Lk)("label",null,"Selecione o Curso",-1),_=(0,l.Lk)("br",null,null,-1),E=["value"],C={class:"col-md-3"},w=(0,l.Lk)("label",null,"Selecione o Periodo",-1),F=(0,l.Lk)("br",null,null,-1),A=["value"],x={class:"col-md-3"},$=(0,l.Lk)("label",null,"Selecione a Classe",-1),y=(0,l.Lk)("br",null,null,-1),N=["value"],S={class:"col-md-3"},T=(0,l.Lk)("label",null,"Selecione a Turma",-1),O=(0,l.Lk)("br",null,null,-1),D=["value"],z={class:"col-md-3"},I=(0,l.Lk)("label",null,"Tipo de Emolumento",-1),R=(0,l.Lk)("br",null,null,-1),X=["value"],H={class:"col-md-3"},P=(0,l.Lk)("label",null,"Emolumento",-1),K=(0,l.Lk)("br",null,null,-1),U=["value"],V={class:"col-md-5 d-flex"},M=(0,l.Lk)("label",{class:"text-white"},".",-1),W=(0,l.Lk)("br",null,null,-1),G=(0,l.Lk)("span",{style:{"font-size":"22px"},class:"fas fa-search mx-1"},null,-1),j=(0,l.Lk)("label",{class:"text-white"},".",-1),q=(0,l.Lk)("br",null,null,-1),B=(0,l.Lk)("span",{style:{"font-size":"22px"},class:"fas fa-file-pdf mx-1"},null,-1),J=(0,l.Lk)("label",{class:"text-white"},".",-1),Y=(0,l.Lk)("br",null,null,-1),Q=(0,l.Lk)("span",{class:"fas fa-trash mx-1 fs-5"},null,-1),Z=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",{class:"bg-secondary"},[(0,l.Lk)("th",null,"NOME"),(0,l.Lk)("th",null,"IDENTIFICAÇÃO"),(0,l.Lk)("th",null,"TELEFONE"),(0,l.Lk)("th",null,"ENCARREGADO"),(0,l.Lk)("th",null,"CONTACTO")])],-1),ee={class:"modal fade",id:"removeForm"},ae={class:"modal-dialog rounded-0"},te={class:"modal-content rounded-0"},le={class:"modal-header"},se={class:"modal-body"},oe={class:"row"},de={class:"modal-footer border-0 pt-0"},ne=(0,l.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1);function ie(e,a,t,ie,re,ce){const ue=(0,l.g2)("Sidebar"),me=(0,l.g2)("Navbar"),he=(0,l.g2)("DataTable"),ge=(0,l.g2)("Footer");return(0,l.uX)(),(0,l.CE)("div",d,[(0,l.bF)(ue),(0,l.Lk)("div",n,[(0,l.bF)(me,{page:"Secretaria / Lista de devedores"}),(0,l.Lk)("div",i,[(0,l.Lk)("div",r,[(0,l.Lk)("div",c,[(0,l.Lk)("div",u,[(0,l.Lk)("div",m,[(0,l.Lk)("div",h,[(0,l.Lk)("div",g,[(0,l.Lk)("div",k,[b,p,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[0]||(a[0]=e=>re.filter_data.ano_id=e)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(re.anos,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.nome),9,v)))),128))],512),[[o.u1,re.filter_data.ano_id]])]),(0,l.Lk)("div",f,[L,_,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[1]||(a[1]=e=>re.filter_data.curso_id=e)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(re.cursos,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.nome),9,E)))),128))],512),[[o.u1,re.filter_data.curso_id]])]),(0,l.Lk)("div",C,[w,F,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[2]||(a[2]=e=>re.filter_data.periodo_id=e)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(re.periodos,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.nome),9,A)))),128))],512),[[o.u1,re.filter_data.periodo_id]])]),(0,l.Lk)("div",x,[$,y,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[3]||(a[3]=e=>re.filter_data.classe_id=e),onChange:a[4]||(a[4]=(...e)=>ce.getSalas&&ce.getSalas(...e))},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(re.classes,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.nome),9,N)))),128))],544),[[o.u1,re.filter_data.classe_id]])]),(0,l.Lk)("div",S,[T,O,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[5]||(a[5]=e=>re.filter_data.sala_id=e)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(re.salas,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.nome),9,D)))),128))],512),[[o.u1,re.filter_data.sala_id]])]),(0,l.Lk)("div",z,[I,R,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[6]||(a[6]=e=>re.filter_data.natureza_id=e),onChange:a[7]||(a[7]=(...e)=>ce.getEmolumentos&&ce.getEmolumentos(...e))},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(re.naturezas,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.nome),9,X)))),128))],544),[[o.u1,re.filter_data.natureza_id]])]),(0,l.Lk)("div",H,[P,K,(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[8]||(a[8]=e=>re.filter_data.emolumento_id=e)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(re.emolumentos,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.nome),9,U)))),128))],512),[[o.u1,re.filter_data.emolumento_id]])]),(0,l.Lk)("div",V,[(0,l.Lk)("div",null,[M,W,(0,l.Lk)("button",{onClick:a[9]||(a[9]=(...e)=>ce.getDevedores&&ce.getDevedores(...e)),class:"btn btn-primary btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[G,(0,l.eW)(" Pesquisar ")])]),(0,l.Lk)("div",null,[j,q,(0,l.Lk)("button",{onClick:a[10]||(a[10]=(...e)=>ce.generatePDF&&ce.generatePDF(...e)),class:"btn btn-info btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[B,(0,l.eW)(" imprimir ")])]),(0,l.Lk)("div",null,[J,Y,(0,l.Lk)("button",{onClick:a[11]||(a[11]=(...e)=>ce.selectRow&&ce.selectRow(...e)),"data-bs-toggle":"modal","data-bs-target":"#removeForm",class:"btn btn-danger btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[Q,(0,l.eW)(" Excluir ")])])])]),(0,l.bF)(he,{ref:"table",data:re.devedores,columns:re.columns,options:{select:!0,language:re.language},class:"display table table-striped table-bordered"},{default:(0,l.k6)((()=>[Z])),_:1},8,["data","columns","options"])])])])]),(0,l.Lk)("div",ee,[(0,l.Lk)("div",ae,[(0,l.Lk)("div",te,[(0,l.Lk)("div",le,[(0,l.Lk)("h4",null,(0,s.v_)(re.title),1)]),(0,l.Lk)("div",se,[(0,l.Lk)("div",oe,[(0,l.Lk)("p",null,[(0,l.eW)(" Deseja excluir "),(0,l.Lk)("b",null,(0,s.v_)(re.matricula.nome),1),(0,l.eW)(" definitivamente da base de dados? ")])])]),(0,l.Lk)("div",de,[ne,(0,l.Lk)("button",{onClick:a[12]||(a[12]=(...e)=>ce.deleteForm&&ce.deleteForm(...e)),class:"btn btn-primary rounded-0"},"Confirmar")])])])])]),(0,l.bF)(ge)])])])}var re=t(6587),ce=t.n(re),ue=t(2833),me=t(5424),he=t(608),ge=t(9715),ke=t(903),be=t(9995),pe=t(3786),ve=t(1749);t(5839);ke.A.use(be.A),ke.A.use(pe.A);var fe={name:"matricula_view",components:{Sidebar:ue.A,Navbar:me.A,Footer:he.A,DataTable:ke.A},data(){return{title:"Matrícula",dataTable:null,selectedRow:null,devedores:[],estudantes:[],anos:[],cursos:[],periodos:[],salas:[],classes:[],naturezas:[],emolumentos:[],matricula:{id:null,Estudante:{},estudante_id:""},filter_data:{ano_id:"",curso_id:"",sala_id:"",periodo_id:"",classe_id:"",natureza_id:"",emolumento_id:""},columns:[{data:null,render:e=>`${e.nome}`},{data:null,render:e=>`${e.identificacao}`},{data:null,render:e=>`${e.telefone}`},{data:null,render:e=>`${e.encarregado}`},{data:null,render:e=>`${e.contacto_encarregado}`}],language:ge.BH}},mounted(){this.getEstudantes(),this.getAnos(),this.getCursos(),this.getPeriodos(),this.getClasses(),this.getNaturezas()},methods:{getNaturezas(){ge.FH.get("/emolumento-natureza/").then((e=>{this.naturezas=e.data})).catch((e=>{console.log(e)}))},getEmolumentos(){const{natureza_id:e}=this.filter_data;ge.FH.get(`/emolumentos/natureza/${e}`).then((e=>{this.emolumentos=e.data})).catch((e=>{console.log(e)}))},getDevedores(){const{ano_id:e,sala_id:a,emolumento_id:t}=this.filter_data;ge.FH.get(`/fluxo-de-caixa/devedores/ano/${e}/turma/${a}/emolumento/${t}`).then((e=>{this.devedores=e.data})).catch((e=>{console.log(e)}))},getEstudantes(){ge.FH.get("/estudantes/").then((e=>{this.estudantes=e.data})).catch((e=>{console.log(e)}))},getAnos(){ge.FH.get("/anos/status/1/").then((e=>{this.anos=e.data})).catch((e=>{console.log(e)}))},getCursos(){ge.FH.get("/cursos/").then((e=>{this.cursos=e.data})).catch((e=>{console.log(e)}))},getSalas(){const{periodo_id:e,curso_id:a,classe_id:t}=this.filter_data;ge.FH.get(`/salas/curso/${a}/classe/${t}/periodo/${e}`).then((e=>{this.salas=e.data})).catch((e=>{console.log(e)}))},getClasses(){ge.FH.get("/classes/").then((e=>{this.classes=e.data})).catch((e=>{console.log(e)}))},getPeriodos(){ge.FH.get("/periodos/").then((e=>{this.periodos=e.data})).catch((e=>{console.log(e)}))},getStudent(){ge.FH.get(`/inscricao/numero/${this.filter_data.numero}`).then((e=>{null!=e.data?(this.estudante=e.data,this.registration.estudante_id=e.data.id,this.showStudent=!0,this.showRegistration=!0):(this.$swal.fire({title:"Notificação",icon:"warning",text:"Nenhum Estudante Encontrado"}),this.showStudent=!1,this.showRegistration=!1)})).catch((e=>{console.log(e)}))},submitForm(){const e={...this.matricula,...this.filter_data,user_id:this.$store.state.user.id,estado:"Estudando"};this.matricula.id>0?ge.FH.put(`/matricula/${this.matricula.id}`,e).then((e=>{e.data.message?(this.$swal.fire({title:e.data.message,icon:"success"}),this.gerarComprovativo(e.data.data.id,e.data.data.curso_id),this.getdevedores(),ce()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível atualizar",icon:"error"})})).catch((e=>{this.$swal.fire({title:"Erro",icon:"error",text:e.response.data.message})})):ge.FH.post("/matricula/",e).then((e=>{e.data.data.id>0?(this.$swal.fire({title:e.data.message,icon:"success"}),this.gerarComprovativo(e.data.data.id,e.data.data.curso_id),this.getdevedores(),ce()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível cadastrar",icon:"error"})})).catch((e=>{this.$swal.fire({title:"Erro",icon:"error",text:e.response.data.message})}))},deleteForm(){ge.FH.delete(`/matricula/${this.matricula.id}`).then((e=>{e.data.message?(this.$swal.fire({title:e.data.message,icon:"success"}),this.getdevedores(),ce()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível excluir",icon:"error"})})).catch((e=>{console.log(e)}))},selectRow(){const e=this.$refs.table.dt,a=this;e.rows({selected:!0}).every((function(){const e=this.data();a.matricula=e}))},clearForm(){this.matricula={}},generatePDF(){let e=1;const a=new ve["default"],t=[{header:"Nº",dataKey:"id"},{header:"NOME DO ESTUDANTE",dataKey:"estudante"},{header:"ENCARREGADO",dataKey:"encarregado"},{header:"CONTACTO",dataKey:"contacto_encarregado"}],l=this.devedores.map((a=>({id:e++,estudante:a.nome,encarregado:a.encarregado,contacto_encarregado:a.contacto_encarregado})));a.addImage("http://192.168.1.127:9000/api/mediafiles/castro.jpeg","JPEG",90,15,25,25),a.setFontSize(12),a.text("INSTITUTO POLITÉCNICO PRIVADO CASTRO",58,50),a.text('"A Luz do Saber"',85,56),a.setFontSize(14),a.text("RELAÇÃO NOMINAL DE ESTUDANTES COM PAGAMENTOS EM ATRASO",20,64);const s=70;let o=s;a.autoTable(t,l,{startY:o,theme:"grid",didDrawPage:function(e){o=e.cursor.y+10}}),a.output("dataurlnewwindow")}},watch:{dataTable:{handler(){this.selectedRow=null},deep:!0}}},Le=t(1241);const _e=(0,Le.A)(fe,[["render",ie]]);var Ee=_e}}]);
//# sourceMappingURL=788.f4a17ceb.js.map