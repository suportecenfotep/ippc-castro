"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[267],{7314:function(e,o,l){l.r(o),l.d(o,{default:function(){return Ie}});var t=l(6768),a=l(4232),s=l(5130);const n={class:"page-wrapper"},d={class:"main-container"},c={class:"content-wrapper-scroll"},r={class:"content-wrapper"},u={class:"row"},i={class:"col-12"},m={class:"card"},b={class:"d-flex p-3"},p=(0,t.Lk)("span",{class:"fas fa-plus mx-1 fs-5"},null,-1),k=(0,t.Lk)("span",{class:"fas fa-pencil mx-1 fs-5"},null,-1),L=(0,t.Lk)("span",{class:"fas fa-trash mx-1 fs-5"},null,-1),h={class:"card-body"},_={class:"row mb-2"},v={class:"col-md-3"},f=(0,t.Lk)("label",null,"Selecione o Ano",-1),g=(0,t.Lk)("br",null,null,-1),E=["value"],F={class:"col-md-3"},w=(0,t.Lk)("label",null,"Selecione o Curso",-1),x=(0,t.Lk)("br",null,null,-1),y=["value"],C={class:"col-md-3"},$=(0,t.Lk)("label",null,"Selecione a Classe",-1),z=(0,t.Lk)("br",null,null,-1),X=["value"],A={class:"col-md-3"},H=(0,t.Lk)("label",null,"Selecione a Natureza",-1),T=(0,t.Lk)("br",null,null,-1),P=["value"],U={class:"col-md-3 d-flex pt-2"},S=(0,t.Lk)("span",{style:{"font-size":"22px"},class:"fas fa-search mx-1"},null,-1),V=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",{class:"bg-secondary"},[(0,t.Lk)("th",null,"NOME"),(0,t.Lk)("th",null,"PREÇO"),(0,t.Lk)("th",null,"ESTADO")])],-1),N={class:"modal fade","data-bs-backdrop":"static",id:"addForm"},D={class:"modal-dialog rounded-0"},R={class:"modal-content rounded-0"},I={class:"modal-header"},K={class:"modal-body"},W={class:"row"},O={class:"col-md-12 mb-3"},j=(0,t.Lk)("label",null,"Emolumento",-1),q=(0,t.Lk)("br",null,null,-1),J=["value"],Q={class:"col-md-12 mb-3"},B=(0,t.Lk)("label",null,"Preço",-1),M=(0,t.Lk)("br",null,null,-1),Z={class:"col-md-12 mb-3"},G=(0,t.Lk)("label",null,"Estado",-1),Y=(0,t.Lk)("br",null,null,-1),ee={class:"modal-footer border-0 pt-0"},oe=(0,t.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1),le={class:"modal fade","data-bs-backdrop":"static",id:"editForm"},te={class:"modal-dialog rounded-0"},ae={class:"modal-content rounded-0"},se={class:"modal-header"},ne={class:"modal-body"},de={class:"row"},ce={class:"col-md-12 mb-3"},re=(0,t.Lk)("label",null,"Emolumento",-1),ue=(0,t.Lk)("br",null,null,-1),ie=["value"],me={class:"col-md-12 mb-3"},be=(0,t.Lk)("label",null,"Preço",-1),pe=(0,t.Lk)("br",null,null,-1),ke={class:"col-md-12 mb-3"},Le=(0,t.Lk)("label",null,"Estado",-1),he=(0,t.Lk)("br",null,null,-1),_e={class:"modal-footer border-0 pt-0"},ve=(0,t.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1),fe={class:"modal fade","data-bs-backdrop":"static",id:"removeForm"},ge={class:"modal-dialog rounded-0"},Ee={class:"modal-content rounded-0"},Fe={class:"modal-header"},we={class:"modal-body"},xe={class:"row"},ye={class:"modal-footer border-0 pt-0"},Ce=(0,t.Lk)("button",{class:"btn btn-secondary rounded-0","data-bs-dismiss":"modal"},"Fechar",-1);function $e(e,o,l,$e,ze,Xe){const Ae=(0,t.g2)("Sidebar"),He=(0,t.g2)("Navbar"),Te=(0,t.g2)("DataTable"),Pe=(0,t.g2)("Footer");return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.bF)(Ae),(0,t.Lk)("div",d,[(0,t.bF)(He,{page:"Tesouraria / Emolumento Preço"}),(0,t.Lk)("div",c,[(0,t.Lk)("div",r,[(0,t.Lk)("div",u,[(0,t.Lk)("div",i,[(0,t.Lk)("div",m,[(0,t.Lk)("div",b,[(0,t.Lk)("button",{onClick:o[0]||(o[0]=(...e)=>Xe.clearForm&&Xe.clearForm(...e)),"data-bs-toggle":"modal","data-bs-target":"#addForm",class:"btn btn-primary btn-sm fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[p,(0,t.eW)(" Adicionar ")]),ze.emolumento_preco.length>0?((0,t.uX)(),(0,t.CE)("button",{key:0,onClick:o[1]||(o[1]=(...e)=>Xe.selectRow&&Xe.selectRow(...e)),"data-bs-toggle":"modal","data-bs-target":"#editForm",class:"btn btn-info btn-dark btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[k,(0,t.eW)(" Editar ")])):(0,t.Q3)("",!0),ze.emolumento_preco.length>0?((0,t.uX)(),(0,t.CE)("button",{key:1,onClick:o[2]||(o[2]=(...e)=>Xe.selectRow&&Xe.selectRow(...e)),"data-bs-toggle":"modal","data-bs-target":"#removeForm",class:"btn btn-danger btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[L,(0,t.eW)(" Excluir ")])):(0,t.Q3)("",!0)]),(0,t.Lk)("div",h,[(0,t.Lk)("div",_,[(0,t.Lk)("div",v,[f,g,(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":o[3]||(o[3]=e=>ze.filter_data.ano_id=e)},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ze.anos,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e.id,value:e.id},(0,a.v_)(e.nome),9,E)))),128))],512),[[s.u1,ze.filter_data.ano_id]])]),(0,t.Lk)("div",F,[w,x,(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":o[4]||(o[4]=e=>ze.filter_data.curso_id=e)},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ze.cursos,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e.id,value:e.id},(0,a.v_)(e.nome),9,y)))),128))],512),[[s.u1,ze.filter_data.curso_id]])]),(0,t.Lk)("div",C,[$,z,(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":o[5]||(o[5]=e=>ze.filter_data.classe_id=e)},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ze.classes,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e.id,value:e.id},(0,a.v_)(e.nome),9,X)))),128))],512),[[s.u1,ze.filter_data.classe_id]])]),(0,t.Lk)("div",A,[H,T,(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":o[6]||(o[6]=e=>ze.filter_data.emolumento_natureza_id=e),onChange:o[7]||(o[7]=(...e)=>Xe.getEmolumentos&&Xe.getEmolumentos(...e))},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ze.naturezas,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e.id,value:e.id},(0,a.v_)(e.nome),9,P)))),128))],544),[[s.u1,ze.filter_data.emolumento_natureza_id]])]),(0,t.Lk)("div",U,[(0,t.Lk)("div",null,[(0,t.Lk)("button",{onClick:o[8]||(o[8]=(...e)=>Xe.getEmolumentosPreco&&Xe.getEmolumentosPreco(...e)),class:"btn btn-info btn-sm mx-1 fw-bold d-flex align-items-center p-2 rounded-3 border-0 text-uppercase"},[S,(0,t.eW)(" Pesquisar ")])])])]),(0,t.bF)(Te,{ref:"table",data:ze.emolumentos_preco,columns:ze.columns,options:{select:!0,language:ze.language},class:"display table table-striped table-bordered"},{default:(0,t.k6)((()=>[V])),_:1},8,["data","columns","options"])])])])]),(0,t.Lk)("div",N,[(0,t.Lk)("div",D,[(0,t.Lk)("div",R,[(0,t.Lk)("div",I,[(0,t.Lk)("h4",null,(0,a.v_)(ze.title),1)]),(0,t.Lk)("div",K,[(0,t.Lk)("div",W,[(0,t.Lk)("div",O,[j,q,(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":o[9]||(o[9]=e=>ze.emolumento_preco.emolumento_id=e)},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ze.emolumentos,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e.id,value:e.id},(0,a.v_)(e.nome),9,J)))),128))],512),[[s.u1,ze.emolumento_preco.emolumento_id]])]),(0,t.Lk)("div",Q,[B,M,(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[10]||(o[10]=e=>ze.emolumento_preco.preco=e)},null,512),[[s.Jo,ze.emolumento_preco.preco]])]),(0,t.Lk)("div",Z,[G,Y,(0,t.bo)((0,t.Lk)("input",{type:"checkbox",class:"form-check","onUpdate:modelValue":o[11]||(o[11]=e=>ze.emolumento_preco.status=e)},null,512),[[s.lH,ze.emolumento_preco.status]])])])]),(0,t.Lk)("div",ee,[oe,(0,t.Lk)("button",{onClick:o[12]||(o[12]=(...e)=>Xe.submitForm&&Xe.submitForm(...e)),class:"btn btn-primary rounded-0"},"Enviar")])])])]),(0,t.Lk)("div",le,[(0,t.Lk)("div",te,[(0,t.Lk)("div",ae,[(0,t.Lk)("div",se,[(0,t.Lk)("h4",null,(0,a.v_)(ze.title),1)]),(0,t.Lk)("div",ne,[(0,t.Lk)("div",de,[(0,t.Lk)("div",ce,[re,ue,(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":o[13]||(o[13]=e=>ze.emolumento_preco.emolumento_id=e)},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ze.emolumentos,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e.id,value:e.id},(0,a.v_)(e.nome),9,ie)))),128))],512),[[s.u1,ze.emolumento_preco.emolumento_id]])]),(0,t.Lk)("div",me,[be,pe,(0,t.bo)((0,t.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":o[14]||(o[14]=e=>ze.emolumento_preco.preco=e)},null,512),[[s.Jo,ze.emolumento_preco.preco]])]),(0,t.Lk)("div",ke,[Le,he,(0,t.bo)((0,t.Lk)("input",{type:"checkbox",class:"form-check","onUpdate:modelValue":o[15]||(o[15]=e=>ze.emolumento_preco.status=e)},null,512),[[s.lH,ze.emolumento_preco.status]])])])]),(0,t.Lk)("div",_e,[ve,(0,t.Lk)("button",{onClick:o[16]||(o[16]=(...e)=>Xe.submitForm&&Xe.submitForm(...e)),class:"btn btn-primary rounded-0"},"Enviar")])])])]),(0,t.Lk)("div",fe,[(0,t.Lk)("div",ge,[(0,t.Lk)("div",Ee,[(0,t.Lk)("div",Fe,[(0,t.Lk)("h4",null,(0,a.v_)(ze.title),1)]),(0,t.Lk)("div",we,[(0,t.Lk)("div",xe,[(0,t.Lk)("p",null,[(0,t.eW)(" Deseja excluir "),(0,t.Lk)("b",null,(0,a.v_)(ze.emolumento_preco.nome),1),(0,t.eW)(" definitivamente da base de dados? ")])])]),(0,t.Lk)("div",ye,[Ce,(0,t.Lk)("button",{onClick:o[17]||(o[17]=(...e)=>Xe.deleteForm&&Xe.deleteForm(...e)),class:"btn btn-primary rounded-0"},"Confirmar")])])])])]),(0,t.bF)(Pe)])])])}var ze=l(6587),Xe=l.n(ze),Ae=l(3362),He=l(8808),Te=l(6313),Pe=l(9715),Ue=l(903),Se=l(9995),Ve=l(3786);Ue.A.use(Se.A),Ue.A.use(Ve.A);var Ne={name:"emolumento_preco_view",components:{Sidebar:Ae.A,Navbar:He.A,Footer:Te.A,DataTable:Ue.A},data(){return{title:"Emolumento Preço",dataTable:null,selectedRow:null,emolumentos_preco:[],candidatos:[],anos:[],cursos:[],naturezas:[],emolumentos:[],classes:[],emolumento_preco:{id:null,emolumento_id:"",status:!0},filter_data:{ano_id:"",curso_id:"",emolumento_natureza_id:"",classe_id:""},columns:[{data:null,render:e=>`${e.Emolumento.nome}`},{data:"preco",render:e=>`${(0,Pe.jq)(e,2,",",".")}`},{data:"status",render:e=>e?'<span class="fas fa-check-circle text-success"></span> Disponível':'<span class="fas fa-check-circle text-danger"></span> Indisponível'}],language:Pe.BH}},mounted(){this.getAnos(),this.getCursos(),this.getClasses(),this.getNaturezas()},beforeUnmount(){this.dataTable&&this.dataTable.destroy()},methods:{numberFormat:Pe.jq,gerarLista(){const{ano_id:e,curso_id:o,periodo_id:l,classe_id:t,sala_id:a}=this.filter_data;Pe.FH.get(`/lista-estudantes-emolumentos_preco/ano/${e}/curso/${o}/periodo/${l}/classe/${t}/sala/${a}`).then((e=>{e.data.url&&window.open(Pe.OZ+"/mediafiles/"+e.data.url,"_blank")})).catch((e=>{console.log(e)}))},getNaturezas(){Pe.FH.get("/emolumento-natureza/").then((e=>{this.naturezas=e.data})).catch((e=>{console.log(e)}))},getEmolumentosPreco(){const{ano_id:e,curso_id:o,classe_id:l,emolumento_natureza_id:t}=this.filter_data;Pe.FH.get(`/emolumento-preco/ano/${e}/curso/${o}/classe/${l}/natureza/${t}/`).then((e=>{this.emolumentos_preco=e.data})).catch((e=>{console.log(e)}))},getEmolumentos(){const{emolumento_natureza_id:e}=this.filter_data;Pe.FH.get(`/emolumentos/natureza/${e}`).then((e=>{this.emolumentos=e.data})).catch((e=>{console.log(e)}))},getAnos(){Pe.FH.get("/anos/status/1/").then((e=>{this.anos=e.data})).catch((e=>{console.log(e)}))},getCursos(){Pe.FH.get("/cursos/").then((e=>{this.cursos=e.data})).catch((e=>{console.log(e)}))},getClasses(){Pe.FH.get("/classes/").then((e=>{this.classes=e.data})).catch((e=>{console.log(e)}))},initDataTable(){this.$nextTick((()=>{this.dataTable=Xe()("#myDataTable").DataTable({})}))},submitForm(){const e={...this.emolumento_preco,...this.filter_data};this.emolumento_preco.id>0?Pe.FH.put(`/emolumento-preco/${this.emolumento_preco.id}`,e).then((e=>{e.data.message?(this.$swal.fire({title:"Sucesso",text:e.data.message,icon:"success"}),this.getEmolumentosPreco(),Xe()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível atualizar",icon:"error"})})).catch((e=>{this.$swal.fire({title:"Erro",icon:"error",text:e.response.data.message})})):Pe.FH.post("/emolumento-preco/",e).then((e=>{e.data.data.id>0?(this.$swal.fire({title:"Sucesso",text:e.data.message,icon:"success"}),this.getEmolumentosPreco(),Xe()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível cadastrar",icon:"error"})})).catch((e=>{this.$swal.fire({title:"Erro",icon:"error",text:e.response.data.message})}))},deleteForm(){Pe.FH.delete(`/emolumento-preco/${this.emolumento_preco.id}`).then((e=>{e.data.message?(this.$swal.fire({title:"Sucesso",text:e.data.message,icon:"success"}),this.getEmolumentosPreco(),Xe()(".btn-secondary").click()):this.$swal.fire({title:"Erro: Não foi possível excluir",icon:"error"})})).catch((e=>{console.log(e)}))},selectRow(){const e=this.$refs.table.dt,o=this;e.rows({selected:!0}).every((function(){const e=this.data();o.emolumento_preco=e}))},clearForm(){this.emolumento_preco={}}},watch:{dataTable:{handler(){this.selectedRow=null},deep:!0}}},De=l(1241);const Re=(0,De.A)(Ne,[["render",$e]]);var Ie=Re}}]);
//# sourceMappingURL=267.eb09397b.js.map